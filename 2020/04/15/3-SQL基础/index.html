<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>3.SQL基础 | WF's Blog</title><meta name="description" content="3.SQL基础"><meta name="keywords" content="mysql"><meta name="author" content="Wu Fei"><meta name="copyright" content="Wu Fei"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="3.SQL基础"><meta name="twitter:description" content="3.SQL基础"><meta name="twitter:image" content="http://linuxwf.com/img/wallhaven-33397.jpg"><meta property="og:type" content="article"><meta property="og:title" content="3.SQL基础"><meta property="og:url" content="http://linuxwf.com/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/"><meta property="og:site_name" content="WF's Blog"><meta property="og:description" content="3.SQL基础"><meta property="og:image" content="http://linuxwf.com/img/wallhaven-33397.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://linuxwf.com/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/"><link rel="prev" title="4.索引及执行计划" href="http://linuxwf.com/2020/04/15/4-%E7%B4%A2%E5%BC%95%E5%8F%8A%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/"><link rel="next" title="2.MySQL体系结构及管理" href="http://linuxwf.com/2020/04/15/2-MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%A1%E7%90%86/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bf8fa809dbe0a82b3d983accb9d256fe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"GQXJKQPX6A","apiKey":"9d6901decfc3e9736a8f99965d4fc700","indexName":"my_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: true,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="WF's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">64</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">47</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL基础"><span class="toc-number">1.</span> <span class="toc-text">SQL基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第1章-SQL介绍"><span class="toc-number">1.1.</span> <span class="toc-text">第1章 SQL介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-SQL-标准"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 SQL 标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-常用SQL分类"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 常用SQL分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-怎么查看帮助"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 怎么查看帮助</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-工具"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-mysql内置的功能"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5 mysql内置的功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第2章-SQL-DDL应用"><span class="toc-number">1.2.</span> <span class="toc-text">第2章 SQL-DDL应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-DDL-针对库的操作"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 DDL - 针对库的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-建库"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.2 建库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-删库-不代表生产操作"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2.1.2 删库(不代表生产操作)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-修改库"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">2.1.3 修改库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-查看库-不属于DDL"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">2.1.4 查看库(不属于DDL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-总结"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">2.1.5 总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-6-建库规范"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">2.1.6 建库规范</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-DDL-针对表的管理"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 DDL - 针对表的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-数据类型"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1 数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-约束"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2.2.2 约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-其他属性"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">2.2.3 其他属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-表属性"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">2.2.4 表属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-5-列属性"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">2.2.5 列属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-DDL-表定义"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 DDL - 表定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-建表规范总结"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 建表规范总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第3章-DCL"><span class="toc-number">1.3.</span> <span class="toc-text">第3章 DCL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第4章-DML-表中的数据行"><span class="toc-number">1.4.</span> <span class="toc-text">第4章 DML (表中的数据行)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-INSERT"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 INSERT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-UPDATE"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 UPDATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-DELETE"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 DELETE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-伪删除"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 伪删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第5章-DQL应用-select"><span class="toc-number">1.5.</span> <span class="toc-text">第5章 DQL应用(select )</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-单独使用-MySQL"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 单独使用(MySQL)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-SELECT-参数名"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">5.1.1 SELECT @@参数名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-–-select-函数"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">5.1.2 – select 函数();</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-SELECT-计算功能"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">5.1.3 SELECT 计算功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-SELECT-配合各种”子句”使用"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 SELECT 配合各种”子句”使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-各子句的执行顺序"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">5.2.1 各子句的执行顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-单表子句-from"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">5.2.2 单表子句-from</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-单表子句-where"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">5.2.3 单表子句-where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-4-SELECT-配合-GROUP-BY-聚合函数应用"><span class="toc-number">1.5.2.4.</span> <span class="toc-text">5.2.4 SELECT 配合 GROUP BY + 聚合函数应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-5-select-配合-having-应用"><span class="toc-number">1.5.2.5.</span> <span class="toc-text">5.2.5 select 配合 having 应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-6-SELECT-配合-ORDER-BY-排序应用"><span class="toc-number">1.5.2.6.</span> <span class="toc-text">5.2.6 SELECT 配合 ORDER BY 排序应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-7-SELECT-配合-LIMIT-使用"><span class="toc-number">1.5.2.7.</span> <span class="toc-text">5.2.7 SELECT 配合 LIMIT 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-8-distinct：去重复"><span class="toc-number">1.5.2.8.</span> <span class="toc-text">5.2.8 distinct：去重复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-9-联合查询-union-all"><span class="toc-number">1.5.2.9.</span> <span class="toc-text">5.2.9 联合查询- union all</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第6章-多表连接查询"><span class="toc-number">1.6.</span> <span class="toc-text">第6章 多表连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-案例准备"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 案例准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-多表连接应用"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 多表连接应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-别名"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 别名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第7章-练习"><span class="toc-number">1.7.</span> <span class="toc-text">第7章 练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第8章-show"><span class="toc-number">1.8.</span> <span class="toc-text">第8章 show</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第9章-元数据"><span class="toc-number">1.9.</span> <span class="toc-text">第9章 元数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-元数据介绍"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 元数据介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-元数据控制"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 元数据控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-information-schema-常用视图"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3 information_schema 常用视图</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/wallhaven-33397.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">WF's Blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">3.SQL基础</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-15 09:45:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-04-15 09:47:32"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-04-15</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon far fa-file-word" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">5.1k</span><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-clock" aria-hidden="true"></i><span>阅读时长: 22 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-comments" aria-hidden="true"></i><span>评论数:</span><a href="/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="SQL基础"><a href="#SQL基础" class="headerlink" title="SQL基础"></a>SQL基础</h1><h2 id="第1章-SQL介绍"><a href="#第1章-SQL介绍" class="headerlink" title="第1章 SQL介绍"></a>第1章 SQL介绍</h2><h3 id="1-1-SQL-标准"><a href="#1-1-SQL-标准" class="headerlink" title="1.1 SQL 标准"></a>1.1 SQL 标准</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)结构化查询语言</span><br><span class="line">(2)5.7 以后符合SQL92严格模式  (SQL86、SQL89、SQL92、SQL99)</span><br><span class="line">(3)通过sql_mode参数来控制</span><br></pre></td></tr></table></figure>

<h3 id="1-2-常用SQL分类"><a href="#1-2-常用SQL分类" class="headerlink" title="1.2 常用SQL分类"></a>1.2 常用SQL分类</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DDL(Data definition language)：数据定义语言</span><br><span class="line">DCL(Data control language)：数据控制语言</span><br><span class="line">DML(Data manipulation language)：数据操作语言</span><br><span class="line">DQL(Data query language)：数据的查询语言</span><br></pre></td></tr></table></figure>

<h3 id="1-3-怎么查看帮助"><a href="#1-3-怎么查看帮助" class="headerlink" title="1.3 怎么查看帮助"></a>1.3 怎么查看帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">help</span> contents;</span><br><span class="line">mysql&gt; <span class="built_in">help</span> Data Definition;</span><br><span class="line">mysql&gt; <span class="built_in">help</span>  DROP DATABASE;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-工具"><a href="#1-4-工具" class="headerlink" title="1.4 工具"></a>1.4 工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqlyog </span><br><span class="line">navicat</span><br><span class="line">workbench</span><br></pre></td></tr></table></figure>

<h3 id="1-5-mysql内置的功能"><a href="#1-5-mysql内置的功能" class="headerlink" title="1.5 mysql内置的功能"></a>1.5 mysql内置的功能</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ego       (\G) Send <span class="built_in">command</span> to mysql server, display result vertically.</span><br><span class="line"><span class="built_in">exit</span>      (\q) Exit mysql. Same as quit.</span><br><span class="line"><span class="built_in">source</span>    (\.) Execute an SQL script file. Takes a file name as an argument.</span><br><span class="line">system    (\!) Execute a system shell <span class="built_in">command</span>.</span><br><span class="line">tee       (\T) Set outfile [to_outfile]. Append everything into given outfile.</span><br><span class="line">use       (\u) Use another database. Takes database name as argument.</span><br></pre></td></tr></table></figure>

<h2 id="第2章-SQL-DDL应用"><a href="#第2章-SQL-DDL应用" class="headerlink" title="第2章 SQL-DDL应用"></a>第2章 SQL-DDL应用</h2><h3 id="2-1-DDL-针对库的操作"><a href="#2-1-DDL-针对库的操作" class="headerlink" title="2.1 DDL - 针对库的操作"></a>2.1 DDL - 针对库的操作</h3><h4 id="2-1-2-建库"><a href="#2-1-2-建库" class="headerlink" title="2.1.2 建库"></a>2.1.2 建库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE guifan CHARSET utf8mb4 ;</span><br><span class="line"></span><br><span class="line">-- 说明:字符集及校对规则</span><br><span class="line">字符集: </span><br><span class="line">mysql&gt; SHOW CHARSET;</span><br><span class="line">utf8mb4(4个字节)  utf8(3字节)</span><br><span class="line">校对规则(排序规则):</span><br><span class="line">mysql&gt; SHOW COLLATION;</span><br><span class="line">utf8mb4_general_ci    不敏感(默认)</span><br><span class="line">utf8mb4_bin           敏感</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-删库-不代表生产操作"><a href="#2-1-2-删库-不代表生产操作" class="headerlink" title="2.1.2 删库(不代表生产操作)"></a>2.1.2 删库(不代表生产操作)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE oldguo;</span><br><span class="line">DROP DATABASE oldboy;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-修改库"><a href="#2-1-3-修改库" class="headerlink" title="2.1.3 修改库"></a>2.1.3 修改库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE linux CHARSET utf8mb4;</span><br><span class="line">注意: 目标字符集是原字符集的严格超集.</span><br></pre></td></tr></table></figure>

<h4 id="2-1-4-查看库-不属于DDL"><a href="#2-1-4-查看库-不属于DDL" class="headerlink" title="2.1.4 查看库(不属于DDL)"></a>2.1.4 查看库(不属于DDL)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE DATABASE linux;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-5-总结"><a href="#2-1-5-总结" class="headerlink" title="2.1.5 总结"></a>2.1.5 总结</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE </span><br><span class="line">DROP DATABASE </span><br><span class="line">ALTER DATABASE </span><br><span class="line">SHOW CREATE DATABASE</span><br></pre></td></tr></table></figure>

<h4 id="2-1-6-建库规范"><a href="#2-1-6-建库规范" class="headerlink" title="2.1.6 建库规范"></a>2.1.6 建库规范</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1) 库名是小写</span><br><span class="line">(2) 不能是数字开头</span><br><span class="line">(3) 限制在16个字符以内</span><br><span class="line">(5) 库名和业务有关</span><br><span class="line">(6) 必须要加字符集</span><br><span class="line">(7) 不能用预留字符</span><br></pre></td></tr></table></figure>

<h3 id="2-2-DDL-针对表的管理"><a href="#2-2-DDL-针对表的管理" class="headerlink" title="2.2 DDL - 针对表的管理"></a>2.2 DDL - 针对表的管理</h3><h4 id="2-2-1-数据类型"><a href="#2-2-1-数据类型" class="headerlink" title="2.2.1 数据类型"></a>2.2.1 数据类型</h4><p><strong>数值类型</strong></p>
<p><img src="/" class="lazyload" data-src="http://cdn.linuxwf.com/img/mysql/mysql05.png"  alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tinyint : 1字节,-128~127  ,0-255</span><br><span class="line">int     : 4字节,-2^31~2^31-1  , 0-2^32-1</span><br></pre></td></tr></table></figure>

<p><strong>字符类型</strong></p>
<p><img src="/" class="lazyload" data-src="http://cdn.linuxwf.com/img/mysql/mysql06.png"  alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">char(M)    : </span><br><span class="line">	char(10)最多存储10个字符(任意字符)</span><br><span class="line">	M的值理论上最大255.</span><br><span class="line">	定长字符类型: 不管你存多长字符,立即分配10个字符长度的存储空间</span><br><span class="line">varchar(M)</span><br><span class="line">	varchar(10)最多存储10个字符(任意字符)</span><br><span class="line">	M的值理论上最大65535</span><br><span class="line">	变长字符类型:按需分配磁盘空间.</span><br><span class="line">	每次存储数据时,都要算一下多长,然后分配空间</span><br><span class="line">	并且需要单独1个字节存储字符长度(超过255字符,会占用2个字节)</span><br><span class="line"></span><br><span class="line">怎么选择:</span><br><span class="line">	小于255,并且固定 长度的列,选择char</span><br><span class="line">	大于255,或者变长 长度的列,选择varchar</span><br></pre></td></tr></table></figure>

<p><strong>时间类型</strong></p>
<p><img src="/" class="lazyload" data-src="http://cdn.linuxwf.com/img/mysql/mysql07.png"  alt=""></p>
<p>列值不能为空，也是表设计的规范，尽可能将所有的列设置为非空。可以设置默认值为0</p>
<p><strong>unique key</strong> ：唯一键  列值不能重复</p>
<p><strong>unsigned</strong> ：无符号  针对数字列，非负数</p>
<p>其他属性:</p>
<p><strong>key</strong> :  索引 可以在某列上建立索引，来优化查询</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DATETIME </span><br><span class="line">范围为从 1000-01-01 00:00:00.000000 至 9999-12-31 23:59:59.999999。</span><br><span class="line">TIMESTAMP </span><br><span class="line">1970-01-01 00:00:00.000000 至 2038-01-19 03:14:07.999999。</span><br><span class="line">timestamp会受到时区的影响</span><br></pre></td></tr></table></figure>

<p><strong>枚举类型</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enum(<span class="string">'m'</span>,<span class="string">'f'</span>):枚举类型</span><br><span class="line">enum(<span class="string">'广东省'</span>,<span class="string">'广西省'</span>,<span class="string">'四川省'</span>,<span class="string">'湖南省'</span>,.....)</span><br><span class="line">       1         2        3         4</span><br></pre></td></tr></table></figure>

<p><strong>二进制类型</strong></p>
<p><img src="/" class="lazyload" data-src="http://cdn.linuxwf.com/img/mysql/mysql08.png"  alt=""></p>
<h4 id="2-2-2-约束"><a href="#2-2-2-约束" class="headerlink" title="2.2.2 约束"></a>2.2.2 约束</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">primary key  主键 : 非空且唯一,一个表只能有一个主键</span><br><span class="line">not null     非空 : 列值必填</span><br><span class="line">unique key   唯一 : 列值不能重复 </span><br><span class="line">unsigned     无符号: 对于数字列,无符号</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-其他属性"><a href="#2-2-3-其他属性" class="headerlink" title="2.2.3 其他属性"></a>2.2.3 其他属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">comment    : 注释 </span><br><span class="line">default    : 默认值</span><br><span class="line">auto_increment : 自动增长</span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-表属性"><a href="#2-2-4-表属性" class="headerlink" title="2.2.4 表属性"></a>2.2.4 表属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">存储引擎:</span><br><span class="line">	InnoDB（默认的）</span><br><span class="line">字符集和排序规则:</span><br><span class="line">	utf8       </span><br><span class="line">	utf8mb4</span><br><span class="line">表的注释</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-列属性"><a href="#2-2-5-列属性" class="headerlink" title="2.2.5 列属性"></a>2.2.5 列属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">约束(一般建表时添加):</span><br><span class="line">**primary key** ：主键约束</span><br><span class="line">设置为主键的列，此列的值必须非空且唯一，主键在一个表中只能有一个，但是可以有多个列一起构成。</span><br><span class="line">**not null**      ：非空约束</span><br><span class="line">列值不能为空，也是表设计的规范，尽可能将所有的列设置为非空。可以设置默认值为0</span><br><span class="line">**unique key** ：唯一键</span><br><span class="line">列值不能重复</span><br><span class="line">**unsigned** ：无符号</span><br><span class="line">针对数字列，非负数。</span><br><span class="line"></span><br><span class="line">其他属性:</span><br><span class="line">**key** :索引</span><br><span class="line">可以在某列上建立索引，来优化查询,一般是根据需要后添加</span><br><span class="line">**default**           :默认值</span><br><span class="line">列中，没有录入值时，会自动使用default的值填充</span><br><span class="line">**auto_increment**:自增长</span><br><span class="line">针对数字列，顺序的自动填充数据（默认是从1开始，将来可以设定起始点和偏移量）</span><br><span class="line">**comment ** : 注释</span><br></pre></td></tr></table></figure>

<h3 id="2-3-DDL-表定义"><a href="#2-3-DDL-表定义" class="headerlink" title="2.3 DDL - 表定义"></a>2.3 DDL - 表定义</h3><p><strong>建表</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE stu(</span><br><span class="line">id   INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT <span class="string">'学号'</span>,</span><br><span class="line">NAME VARCHAR(64) NOT NULL COMMENT <span class="string">'姓名'</span>,</span><br><span class="line">age TINYINT UNSIGNED NOT NULL DEFAULT 99 COMMENT <span class="string">'年龄'</span>,</span><br><span class="line">gender ENUM(<span class="string">'m'</span>,<span class="string">'f'</span>,<span class="string">'n'</span>) NOT NULL DEFAULT <span class="string">'n'</span> COMMENT <span class="string">'性别'</span>,</span><br><span class="line">telnum CHAR(11) NOT NULL DEFAULT <span class="string">'0'</span> COMMENT <span class="string">'手机号'</span>,</span><br><span class="line">intime DATETIME NOT NULL DEFAULT NOW() COMMENT <span class="string">'入学时间'</span></span><br><span class="line">) ENGINE=INNODB CHARSET=utf8mb4 COMMENT <span class="string">'学生表'</span>;</span><br><span class="line"></span><br><span class="line">扩展:</span><br><span class="line">create table t1 like stu;                   <span class="comment">#只克隆表结构</span></span><br><span class="line">create table user select * from mysql.user; <span class="comment">#表结构和数据都可用(索引不克隆)</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-建表规范总结"><a href="#2-4-建表规范总结" class="headerlink" title="2.4 建表规范总结"></a>2.4 建表规范总结</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(1) 表名要和业务有关</span><br><span class="line">(2) 表名不能有大写</span><br><span class="line">(3) 表名不能有数字开头</span><br><span class="line">(4) 表必须设置存储引擎</span><br><span class="line">(5) 表必须设置数据类型</span><br><span class="line">(6) 选择合适并简短的数据类型</span><br><span class="line">(7) 每个表要有主键,一般可以无关列</span><br><span class="line">(8) 每个列设置非空约束,设置默认值</span><br><span class="line">(9) 每个列和表要有注释</span><br><span class="line">(10) 不使用预留字符</span><br></pre></td></tr></table></figure>

<p>— 查看表结构</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">desc stu;</span><br><span class="line">show create table stu;</span><br></pre></td></tr></table></figure>

<p>— 删除表 (危险!!!)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop table user;</span><br></pre></td></tr></table></figure>

<p>— 修改表结构</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(1) 在stu表中添加qq列</span><br><span class="line">ALTER TABLE stu ADD qq VARCHAR(20) NOT NULL DEFAULT 0 COMMENT <span class="string">'QQ号'</span>;</span><br><span class="line">DESC stu;</span><br><span class="line"></span><br><span class="line">注意: </span><br><span class="line">1. 大表结构变更,会长时间锁表,肯定会影响到线上业务</span><br><span class="line">2. 8.0以后就自动解决了,8.0以前需要业务不繁忙期间或者使用PT-OSC工具</span><br><span class="line"></span><br><span class="line">(2) 在gender后加一个wechat列</span><br><span class="line">ALTER TABLE stu ADD wecht  VARCHAR(20) NOT NULL DEFAULT <span class="string">'0'</span>  COMMENT <span class="string">'微信号'</span> AFTER gender ;</span><br><span class="line">DESC stu;</span><br><span class="line"></span><br><span class="line">(3) 在首列添加sid列</span><br><span class="line">ALTER TABLE stu ADD sid  VARCHAR(20) NOT NULL DEFAULT <span class="string">'0'</span>  COMMENT <span class="string">'sid'</span> FIRST;</span><br><span class="line"></span><br><span class="line">(4) 删除列</span><br><span class="line">DESC stu;</span><br><span class="line">ALTER TABLE stu DROP sid;</span><br><span class="line">ALTER TABLE stu DROP qq;</span><br><span class="line">ALTER TABLE stu DROP wecht;</span><br><span class="line"></span><br><span class="line">(5) 修改列的属性</span><br><span class="line">ALTER TABLE stu MODIFY NAME VARCHAR(100) NOT NULL COMMENT <span class="string">'姓名'</span>;</span><br><span class="line">ALTER TABLE stu CHANGE NAME sname VARCHAR(64) NOT NULL COMMENT <span class="string">'姓名'</span>;</span><br><span class="line">--- 清空表(危险)</span><br><span class="line">TRUNCATE TABLE stu;</span><br></pre></td></tr></table></figure>

<h2 id="第3章-DCL"><a href="#第3章-DCL" class="headerlink" title="第3章 DCL"></a>第3章 DCL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant </span><br><span class="line">revoke</span><br></pre></td></tr></table></figure>

<h2 id="第4章-DML-表中的数据行"><a href="#第4章-DML-表中的数据行" class="headerlink" title="第4章 DML (表中的数据行)"></a>第4章 DML (表中的数据行)</h2><h3 id="4-1-INSERT"><a href="#4-1-INSERT" class="headerlink" title="4.1 INSERT"></a>4.1 INSERT</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：INSERT INTO 表 VALUES(v1,v2,v3,....)</span></span><br><span class="line">(1) 最规范的写法</span><br><span class="line">DESC stu;</span><br><span class="line">INSERT INTO </span><br><span class="line">stu(sname,age,gender,telnum)</span><br><span class="line">VALUES</span><br><span class="line">(<span class="string">'张三'</span>,19,<span class="string">'m'</span>,<span class="string">'110'</span>),</span><br><span class="line">(<span class="string">'张四'</span>,17,<span class="string">'f'</span>,<span class="string">'119'</span>),</span><br><span class="line">(<span class="string">'张五'</span>,18,<span class="string">'m'</span>,<span class="string">'120'</span>);</span><br><span class="line"></span><br><span class="line">SELECT * FROM stu;</span><br><span class="line">(2) 简易的写法</span><br><span class="line">INSERT INTO stu</span><br><span class="line">VALUES(4,<span class="string">'李四'</span>,20,<span class="string">'m'</span>,<span class="string">'122'</span>,<span class="string">'2019-10-10 18:00:00'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="4-2-UPDATE"><a href="#4-2-UPDATE" class="headerlink" title="4.2 UPDATE"></a>4.2 UPDATE</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表  SET 列=cc  WHERE 条件</span><br><span class="line">UPDATE stu SET age=29 WHERE sname=<span class="string">'张三'</span>;</span><br><span class="line">SELECT * FROM stu;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-DELETE"><a href="#4-3-DELETE" class="headerlink" title="4.3 DELETE"></a>4.3 DELETE</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM 表 WHERE 条件</span><br><span class="line">DELETE FROM stu WHERE sname=<span class="string">'张五'</span>;</span><br><span class="line"></span><br><span class="line">DROP TABLE , TRUNCATE TABLE ,DELETE FROM TABLE  区别</span><br><span class="line">DROP TABLE : 表结构+数据全部(物理)删除</span><br><span class="line">TRUNCATE TABLE: 数据全部清空(物理),清空是区</span><br><span class="line">DELETE FROM TABLE :逐行删除表中所有数据,逻辑删除</span><br></pre></td></tr></table></figure>

<h3 id="4-4-伪删除"><a href="#4-4-伪删除" class="headerlink" title="4.4 伪删除"></a>4.4 伪删除</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">用状态列标记一个行是否存在.</span><br><span class="line">UPDATE 替代 DELETE</span><br><span class="line">(1) 添加一个状态列(1代表删除,0代表未删除)</span><br><span class="line">ALTER TABLE stu ADD state CHAR(1) NOT NULL DEFAULT <span class="string">'0'</span> COMMENT <span class="string">'状态列:1代表删除,0代表未删除'</span>;</span><br><span class="line">SELECT * FROM stu;</span><br><span class="line"></span><br><span class="line">(2) 删除张四数据行</span><br><span class="line">原语句:</span><br><span class="line">DELETE FROM stu WHERE sname=<span class="string">'张四'</span>;</span><br><span class="line">改写为:</span><br><span class="line">UPDATE stu SET state=<span class="string">'1'</span> WHERE sname=<span class="string">'张四'</span>;</span><br><span class="line">(3) 查询数据</span><br><span class="line">原查询语句:</span><br><span class="line">SELECT * FROM stu;</span><br><span class="line">改写为:</span><br><span class="line">SELECT * FROM stu WHERE state=<span class="string">'0'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="第5章-DQL应用-select"><a href="#第5章-DQL应用-select" class="headerlink" title="第5章 DQL应用(select )"></a>第5章 DQL应用(select )</h2><p>select : 查询表中的数据行(记录)</p>
<h3 id="5-1-单独使用-MySQL"><a href="#5-1-单独使用-MySQL" class="headerlink" title="5.1 单独使用(MySQL)"></a>5.1 单独使用(MySQL)</h3><h4 id="5-1-1-SELECT-参数名"><a href="#5-1-1-SELECT-参数名" class="headerlink" title="5.1.1 SELECT @@参数名"></a>5.1.1 SELECT @@参数名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- select @@参数名</span><br><span class="line">用来查询MySQL中设定的参数.</span><br><span class="line">SELECT @@port;</span><br><span class="line">SELECT @@datadir;</span><br><span class="line">SELECT @@server_id;</span><br><span class="line">SELECT @@innodb_flush_log_at_trx_commit;</span><br><span class="line">SHOW VARIABLES;</span><br><span class="line">SHOW VARIABLES LIKE <span class="string">'%trx%'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-2-–-select-函数"><a href="#5-1-2-–-select-函数" class="headerlink" title="5.1.2 – select 函数();"></a>5.1.2 – select 函数();</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE world;</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">SELECT NOW();</span><br><span class="line">SELECT CONCAT(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-3-SELECT-计算功能"><a href="#5-1-3-SELECT-计算功能" class="headerlink" title="5.1.3 SELECT 计算功能"></a>5.1.3 SELECT 计算功能</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select 3+5;</span><br><span class="line">+-----+</span><br><span class="line">| 3+5 |</span><br><span class="line">+-----+</span><br><span class="line">|   8 |</span><br><span class="line">+-----+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="5-2-SELECT-配合各种”子句”使用"><a href="#5-2-SELECT-配合各种”子句”使用" class="headerlink" title="5.2 SELECT 配合各种”子句”使用"></a>5.2 SELECT 配合各种”子句”使用</h3><h4 id="5-2-1-各子句的执行顺序"><a href="#5-2-1-各子句的执行顺序" class="headerlink" title="5.2.1 各子句的执行顺序"></a>5.2.1 各子句的执行顺序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列1,列2,列3 ,..</span><br><span class="line">FROM</span><br><span class="line">WHERE</span><br><span class="line">GROUP BY</span><br><span class="line">HAVING</span><br><span class="line">ORDER BY</span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure>

<h4 id="5-2-2-单表子句-from"><a href="#5-2-2-单表子句-from" class="headerlink" title="5.2.2 单表子句-from"></a>5.2.2 单表子句-from</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">world : 世界</span><br><span class="line">city  : 城市</span><br><span class="line">	id          : 城市ID</span><br><span class="line">	NAME        : 城市名 </span><br><span class="line">	countrycode : 国家代码(CHN,USA)</span><br><span class="line">	district    : 区域(省,州)</span><br><span class="line">	population  : 人口</span><br><span class="line">	</span><br><span class="line">例子: </span><br><span class="line">SELECT 列.... FROM  表;</span><br><span class="line">(1) 查询city表中的所有数据 </span><br><span class="line">SELECT  *  FROM city;</span><br><span class="line">(2) 查询city表中 name和population列的所有值</span><br><span class="line">SELECT NAME,population FROM city ;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-3-单表子句-where"><a href="#5-2-3-单表子句-where" class="headerlink" title="5.2.3 单表子句-where"></a>5.2.3 单表子句-where</h4><p>SELECT 列…. FROM  表 WHERE 条件;<br>例子:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--- WHERE 的等值条件查询</span><br><span class="line">(1) 查询city表中,中国所有的城市信息</span><br><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'CHN'</span>;</span><br><span class="line">--- WHERE 的 &gt; &lt; &gt;= &lt;= != &lt;&gt;</span><br><span class="line">(2) 查询人口数小于100人的城市.</span><br><span class="line">SELECT * FROM city WHERE Population&lt;100;</span><br><span class="line">--- WHERE 的 AND , OR </span><br><span class="line">(3) 查询中国,人口数量大于500w的城市</span><br><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'CHN'</span> AND population&gt;5000000;</span><br><span class="line">(4) 查询中国和美国的所有城市信息</span><br><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'CHN'</span> OR countrycode=<span class="string">'USA'</span> ;</span><br><span class="line">--- WHERE 配合 LIKE 的模糊查询</span><br><span class="line">(5) 查询CH开头的国家的城市信息</span><br><span class="line">SELECT * FROM city WHERE countrycode LIKE <span class="string">'CH%'</span>;</span><br><span class="line">--- WHERE 配合 IN 子句使用</span><br><span class="line">(6)查询中国和美国的所有城市信息</span><br><span class="line">SELECT * FROM city WHERE countrycode IN (<span class="string">'CHN'</span>,<span class="string">'USA'</span>);</span><br><span class="line">--- WHERE 配合 BETWEEN AND </span><br><span class="line">(7) 查询世界上人口数量在100w到200w之间的城市</span><br><span class="line">SELECT * FROM city  WHERE population &gt;=1000000 AND population&lt;=2000000;</span><br><span class="line">SELECT * FROM city  WHERE population BETWEEN 1000000 AND 2000000;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-4-SELECT-配合-GROUP-BY-聚合函数应用"><a href="#5-2-4-SELECT-配合-GROUP-BY-聚合函数应用" class="headerlink" title="5.2.4 SELECT 配合 GROUP BY + 聚合函数应用"></a>5.2.4 SELECT 配合 GROUP BY + 聚合函数应用</h4><p>— 聚合函数(数据统计类的功能)<br>平均值  AVG()<br>最大值  MAX()<br>最小值  MIN()<br>总和    SUM()<br>计数    COUNT()<br>列转行  GROUP_CONCAT()</p>
<p>— GROUP BY</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">例子:</span><br><span class="line">--- (1) 统计每个国家的总人口数量</span><br><span class="line">SELECT countrycode,SUM(population)</span><br><span class="line">FROM city</span><br><span class="line">GROUP BY countrycode;</span><br><span class="line"></span><br><span class="line">--- (2) 统计中国每个省的总人口数量</span><br><span class="line">SELECT district,SUM(population)</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">GROUP BY district;</span><br><span class="line"></span><br><span class="line">--- (3) 统计中国每个省的城市个数和城市名称列表</span><br><span class="line">SELECT district , COUNT(NAME),GROUP_CONCAT(NAME)</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">GROUP BY district;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-5-select-配合-having-应用"><a href="#5-2-5-select-配合-having-应用" class="headerlink" title="5.2.5 select 配合 having 应用"></a>5.2.5 select 配合 having 应用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例子:</span><br><span class="line">--- (1) 统计中国每个省的总人口数量大于10000000</span><br><span class="line">SELECT district,SUM(population)</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span> </span><br><span class="line">GROUP BY district</span><br><span class="line">HAVING  SUM(population)&gt;10000000;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-6-SELECT-配合-ORDER-BY-排序应用"><a href="#5-2-6-SELECT-配合-ORDER-BY-排序应用" class="headerlink" title="5.2.6 SELECT 配合 ORDER BY 排序应用"></a>5.2.6 SELECT 配合 ORDER BY 排序应用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">例子:</span><br><span class="line">--- (1) 查询中国所有城市,并按人口从小到大(从大到小)</span><br><span class="line">SELECT * FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">ORDER BY population DESC;</span><br><span class="line"></span><br><span class="line">--- (2) 统计中国每个省的总人口数量,并按总人口数从大到小排序</span><br><span class="line">SELECT district,SUM(population)</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">GROUP BY district</span><br><span class="line">ORDER BY SUM(population) DESC;</span><br><span class="line"></span><br><span class="line">--- (3) 统计中国每个省的总人口数量,并查询总人口数超过500w的信息,按总人口降序排序</span><br><span class="line">SELECT district,SUM(population)</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span> </span><br><span class="line">GROUP BY district</span><br><span class="line">HAVING  SUM(population)&gt;5000000</span><br><span class="line">ORDER BY SUM(population) DESC ;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-7-SELECT-配合-LIMIT-使用"><a href="#5-2-7-SELECT-配合-LIMIT-使用" class="headerlink" title="5.2.7 SELECT 配合 LIMIT 使用"></a>5.2.7 SELECT 配合 LIMIT 使用</h4><ol>
<li>查看中国所有的城市，并按人口数进行排序(从大到小)</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'CHN'</span> ORDER BY population DESC;</span><br></pre></td></tr></table></figure>

<ol>
<li>统计中国各个省的总人口数量，按照总人口从大到小排序</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT district <span class="keyword">AS</span> 省 ,SUM(Population) <span class="keyword">AS</span> 总人口</span><br><span class="line">FROM city</span><br><span class="line">WHERE countrycode=<span class="string">'chn'</span></span><br><span class="line">GROUP BY district</span><br><span class="line">ORDER BY 总人口 DESC ;</span><br></pre></td></tr></table></figure>

<ol>
<li>统计中国,每个省的总人口,找出总人口大于500w的,并按总人口从大到小排序,只显示前三名</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SELECT  district, SUM(population)  FROM  city </span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">GROUP BY district </span><br><span class="line"><span class="function">HAVING <span class="title">SUM</span>(<span class="params">population</span>)&gt;5000000</span></span><br><span class="line"><span class="function">ORDER BY <span class="title">SUM</span>(<span class="params">population</span>) DESC</span></span><br><span class="line"><span class="function">LIMIT 3</span> ;</span><br><span class="line"></span><br><span class="line">LIMIT N ,M ---&gt;跳过N,显示一共M行</span><br><span class="line">LIMIT <span class="number">5</span>,<span class="number">5</span></span><br><span class="line"></span><br><span class="line">SELECT  district, SUM(population)  FROM  city </span><br><span class="line">WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">GROUP BY district </span><br><span class="line"><span class="function">HAVING <span class="title">SUM</span>(<span class="params">population</span>)&gt;5000000</span></span><br><span class="line"><span class="function">ORDER BY <span class="title">SUM</span>(<span class="params">population</span>) DESC</span></span><br><span class="line"><span class="function">LIMIT 5,5</span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-8-distinct：去重复"><a href="#5-2-8-distinct：去重复" class="headerlink" title="5.2.8 distinct：去重复"></a>5.2.8 distinct：去重复</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT countrycode FROM city ;</span><br><span class="line"><span class="function">SELECT <span class="title">DISTINCT</span><span class="params">(countrycode)</span> FROM city  </span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-9-联合查询-union-all"><a href="#5-2-9-联合查询-union-all" class="headerlink" title="5.2.9 联合查询- union all"></a>5.2.9 联合查询- union all</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 中国或美国城市信息</span><br><span class="line"></span><br><span class="line">SELECT * FROM city </span><br><span class="line"><span class="function">WHERE countrycode <span class="title">IN</span> (<span class="params"><span class="string">'CHN'</span> ,<span class="string">'USA'</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'CHN'</span></span><br><span class="line">UNION ALL</span><br><span class="line">SELECT * FROM city WHERE countrycode=<span class="string">'USA'</span></span><br><span class="line"></span><br><span class="line">说明:一般情况下,我们会将 IN 或者 OR 语句 改写成 UNION ALL,来提高性能</span><br><span class="line">UNION     去重复</span><br><span class="line">UNION ALL 不去重复</span><br></pre></td></tr></table></figure>

<h2 id="第6章-多表连接查询"><a href="#第6章-多表连接查询" class="headerlink" title="第6章 多表连接查询"></a>第6章 多表连接查询</h2><h3 id="6-1-案例准备"><a href="#6-1-案例准备" class="headerlink" title="6.1 案例准备"></a>6.1 案例准备</h3><p>按需求创建一下表结构:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">use school</span><br><span class="line">student ：学生表</span><br><span class="line">sno：    学号</span><br><span class="line">sname：学生姓名</span><br><span class="line">sage： 学生年龄</span><br><span class="line">ssex： 学生性别</span><br><span class="line"></span><br><span class="line">teacher ：教师表</span><br><span class="line">tno：     教师编号</span><br><span class="line">tname：教师名字</span><br><span class="line"></span><br><span class="line">course ：课程表</span><br><span class="line">cno：  课程编号</span><br><span class="line">cname：课程名字</span><br><span class="line">tno：  教师编号</span><br><span class="line"></span><br><span class="line">score  ：成绩表</span><br><span class="line">sno：  学号</span><br><span class="line">cno：  课程编号</span><br><span class="line">score：成绩</span><br><span class="line"></span><br><span class="line">-- 项目构建</span><br><span class="line">CREATE DATABASE school CHARSET utf8mb4;</span><br><span class="line">USE school</span><br><span class="line"></span><br><span class="line">CREATE TABLE student(</span><br><span class="line">sno INT NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT <span class="string">'学号'</span>,</span><br><span class="line">sname VARCHAR(20) NOT NULL COMMENT <span class="string">'姓名'</span>,</span><br><span class="line">sage TINYINT UNSIGNED  NOT NULL COMMENT <span class="string">'年龄'</span>,</span><br><span class="line">ssex  ENUM(<span class="string">'f'</span>,<span class="string">'m'</span>) NOT NULL DEFAULT <span class="string">'m'</span> COMMENT <span class="string">'性别'</span></span><br><span class="line">)ENGINE=INNODB CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE course(</span><br><span class="line">cno INT NOT NULL PRIMARY KEY COMMENT <span class="string">'课程编号'</span>,</span><br><span class="line">cname VARCHAR(20) NOT NULL COMMENT <span class="string">'课程名字'</span>,</span><br><span class="line">tno INT NOT NULL  COMMENT <span class="string">'教师编号'</span></span><br><span class="line">)ENGINE=INNODB CHARSET utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE sc (</span><br><span class="line">sno INT NOT NULL COMMENT <span class="string">'学号'</span>,</span><br><span class="line">cno INT NOT NULL COMMENT <span class="string">'课程编号'</span>,</span><br><span class="line">score INT  NOT NULL DEFAULT 0 COMMENT <span class="string">'成绩'</span></span><br><span class="line">)ENGINE=INNODB CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE teacher(</span><br><span class="line">tno INT NOT NULL PRIMARY KEY COMMENT <span class="string">'教师编号'</span>,</span><br><span class="line">tname VARCHAR(20) NOT NULL COMMENT <span class="string">'教师名字'</span></span><br><span class="line">)ENGINE=INNODB CHARSET utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO student(sno,sname,sage,ssex)</span><br><span class="line">VALUES</span><br><span class="line">(1,<span class="string">'zhang3'</span>,18,<span class="string">'m'</span>),</span><br><span class="line">(2,<span class="string">'zhang4'</span>,18,<span class="string">'m'</span>),</span><br><span class="line">(3,<span class="string">'li4'</span>,18,<span class="string">'m'</span>),</span><br><span class="line">(4,<span class="string">'wang5'</span>,19,<span class="string">'f'</span>),</span><br><span class="line">(5,<span class="string">'zh4'</span>,18,<span class="string">'m'</span>),</span><br><span class="line">(6,<span class="string">'zhao4'</span>,18,<span class="string">'m'</span>),</span><br><span class="line">(7,<span class="string">'ma6'</span>,19,<span class="string">'f'</span>),</span><br><span class="line">(8,<span class="string">'oldboy'</span>,20,<span class="string">'m'</span>),</span><br><span class="line">(9,<span class="string">'oldgirl'</span>,20,<span class="string">'f'</span>),</span><br><span class="line">(10,<span class="string">'oldp'</span>,25,<span class="string">'m'</span>);</span><br><span class="line"></span><br><span class="line">INSERT INTO teacher(tno,tname) VALUES</span><br><span class="line">(101,<span class="string">'haoge'</span>),</span><br><span class="line">(102,<span class="string">'yage'</span>),</span><br><span class="line">(103,<span class="string">'oldguo'</span>);</span><br><span class="line"></span><br><span class="line">DESC course;</span><br><span class="line">INSERT INTO course(cno,cname,tno)</span><br><span class="line">VALUES</span><br><span class="line">(1001,<span class="string">'linux'</span>,101),</span><br><span class="line">(1002,<span class="string">'python'</span>,102),</span><br><span class="line">(1003,<span class="string">'mysql'</span>,103);</span><br><span class="line"></span><br><span class="line">DESC sc;</span><br><span class="line">INSERT INTO sc(sno,cno,score)</span><br><span class="line">VALUES</span><br><span class="line">(1,1001,80),</span><br><span class="line">(1,1002,59),</span><br><span class="line">(2,1002,90),</span><br><span class="line">(2,1003,100),</span><br><span class="line">(3,1001,99),</span><br><span class="line">(3,1003,40),</span><br><span class="line">(4,1001,79),</span><br><span class="line">(4,1002,61),</span><br><span class="line">(4,1003,99),</span><br><span class="line">(5,1003,40),</span><br><span class="line">(6,1001,89),</span><br><span class="line">(6,1003,77),</span><br><span class="line">(7,1001,67),</span><br><span class="line">(7,1003,82),</span><br><span class="line">(8,1001,70),</span><br><span class="line">(9,1003,80),</span><br><span class="line">(10,1003,96);</span><br><span class="line"></span><br><span class="line">SELECT * FROM student;</span><br><span class="line">SELECT * FROM teacher;</span><br><span class="line">SELECT * FROM course;</span><br><span class="line">SELECT * FROM sc;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-多表连接应用"><a href="#6-2-多表连接应用" class="headerlink" title="6.2 多表连接应用"></a>6.2 多表连接应用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">1.查询一下世界上人口数量小于100人的城市名和国家名</span><br><span class="line">	SELECT b.name ,a.name ,a.population</span><br><span class="line">	FROM  city  AS a</span><br><span class="line">	JOIN  country AS b</span><br><span class="line">	ON    b.code=a.countrycode</span><br><span class="line">	WHERE  a.Population&lt;100</span><br><span class="line">2.查询一下chengdu城市,人口数,所在的国家名,所在的大洲</span><br><span class="line">	SELECT city.name,city.Population ,country.name,country.Continent</span><br><span class="line">	FROM city </span><br><span class="line">	JOIN country</span><br><span class="line">	ON city.countrycode=country.code </span><br><span class="line">	WHERE city.name=<span class="string">'chengdu'</span>;</span><br><span class="line">3.查询一下chengdu城市,人口数,所在的国家名,所在的大洲</span><br><span class="line">	SELECT city.name,city.Population ,country.name,country.Continent</span><br><span class="line">	FROM city </span><br><span class="line">	JOIN country</span><br><span class="line">	ON city.countrycode=country.code </span><br><span class="line">	WHERE city.name=<span class="string">'chengdu'</span>;</span><br><span class="line">4.oldguo老师教的课程名称</span><br><span class="line">	SELECT teacher.tname,course.cname</span><br><span class="line">	FROM  teacher</span><br><span class="line">	JOIN course</span><br><span class="line">	ON teacher.tno=course.tno </span><br><span class="line">	WHERE teacher.tname=<span class="string">'oldguo'</span>;</span><br><span class="line">5.每位老师,所教课程的平均分</span><br><span class="line">=========================</span><br><span class="line">oldguo   mysql   80</span><br><span class="line">yage     python  70 </span><br><span class="line">haoge    linux   75</span><br><span class="line">=========================</span><br><span class="line">	SELECT teacher.tname,course.cname,AVG(sc.score)</span><br><span class="line">	FROM teacher </span><br><span class="line">	JOIN course</span><br><span class="line">	ON teacher.tno=course.tno</span><br><span class="line">	JOIN sc</span><br><span class="line">	ON course.cno=sc.cno</span><br><span class="line">	GROUP BY teacher.tname,course.cname;</span><br><span class="line">6.统计一下每位老师所教学生个数及学生名字</span><br><span class="line">	SELECT teacher.tname,COUNT(student.sname),</span><br><span class="line">	GROUP_CONCAT(CONCAT(student.sname,<span class="string">"_"</span>,student.sno))</span><br><span class="line">	FROM teacher </span><br><span class="line">	JOIN course</span><br><span class="line">	ON teacher.tno=course.tno</span><br><span class="line">	JOIN sc</span><br><span class="line">	ON course.cno=sc.cno </span><br><span class="line">	JOIN student</span><br><span class="line">	ON sc.sno=student.sno </span><br><span class="line">	GROUP BY teacher.tname</span><br><span class="line">	</span><br><span class="line">---------</span><br><span class="line">字符串拼接</span><br><span class="line">SELECT CONCAT(USER,<span class="string">"@"</span>,HOST) FROM mysql.user;</span><br><span class="line">SELECT USER,HOST FROM mysql.user;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-别名"><a href="#6-3-别名" class="headerlink" title="6.3 别名"></a>6.3 别名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">--- 表别名 </span><br><span class="line">SELECT teacher.tname,COUNT(student.sname),GROUP_CONCAT(CONCAT(student.sname,<span class="string">"_"</span>,student.sno))</span><br><span class="line">FROM teacher </span><br><span class="line">JOIN course</span><br><span class="line">ON teacher.tno=course.tno</span><br><span class="line">JOIN sc</span><br><span class="line">ON course.cno=sc.cno </span><br><span class="line">JOIN student</span><br><span class="line">ON sc.sno=student.sno </span><br><span class="line">GROUP BY teacher.tname</span><br><span class="line"></span><br><span class="line">应用别名后:</span><br><span class="line">SELECT a.tname,COUNT(d.sname),GROUP_CONCAT(CONCAT(d.sname,<span class="string">"_"</span>,d.sno))</span><br><span class="line">FROM teacher AS a</span><br><span class="line">JOIN course AS b </span><br><span class="line">ON a.tno=b.tno</span><br><span class="line">JOIN sc AS c</span><br><span class="line">ON b.cno=c.cno </span><br><span class="line">JOIN student AS d </span><br><span class="line">ON c.sno=d.sno </span><br><span class="line">GROUP BY a.tname</span><br><span class="line"></span><br><span class="line">--- 列别名</span><br><span class="line">SELECT a.tname AS tname ,</span><br><span class="line">COUNT(d.sname) AS stu_count ,</span><br><span class="line">GROUP_CONCAT(CONCAT(d.sname,<span class="string">"_"</span>,d.sno)) AS stu_list</span><br><span class="line">FROM teacher AS a</span><br><span class="line">JOIN course AS b </span><br><span class="line">ON a.tno=b.tno</span><br><span class="line">JOIN sc AS c</span><br><span class="line">ON b.cno=c.cno </span><br><span class="line">JOIN student AS d </span><br><span class="line">ON c.sno=d.sno </span><br><span class="line">GROUP BY a.tname</span><br><span class="line"></span><br><span class="line">说明: 列别名只能在having或者order by中调用</span><br></pre></td></tr></table></figure>

<h2 id="第7章-练习"><a href="#第7章-练习" class="headerlink" title="第7章 练习"></a>第7章 练习</h2><p>统计zhang3,学习了几门课</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select student.sname,count(sc.cno) </span><br><span class="line">from student join sc on student.sno=sc.sno </span><br><span class="line"><span class="built_in">where</span> student.sname=<span class="string">'zhang3'</span> </span><br><span class="line">group by student.sname;</span><br></pre></td></tr></table></figure>

<p>查询zhang3,学习的课程名称有哪些</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select student.sname,group_concat(course.cname) </span><br><span class="line">from student </span><br><span class="line">join sc </span><br><span class="line">on student.sno=sc.snno </span><br><span class="line">join course </span><br><span class="line">on sc.cno=course.cno </span><br><span class="line"><span class="built_in">where</span> student.sname=<span class="string">'zhang3'</span> </span><br><span class="line">group by student.sname;</span><br></pre></td></tr></table></figure>

<p>查询oldguo所教课程的平均分数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select teacher.tname,course.cname,avg(sc.score) </span><br><span class="line">from teacher </span><br><span class="line">join course </span><br><span class="line">on teacher.tno=course.tno </span><br><span class="line">join sc </span><br><span class="line">on course.cno=sc.cno </span><br><span class="line"><span class="built_in">where</span> teacher.tname=<span class="string">'oldguo'</span> </span><br><span class="line">group by course.cno;</span><br></pre></td></tr></table></figure>

<p>查询所有老师所教学生不及格的信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select teacher.tname , student.sname , course.cname , sc.score </span><br><span class="line">from teacher join course on teacher.tno=course.tno </span><br><span class="line">join sc on course.cno=sc.cno</span><br><span class="line">join student on sc.sno=student.sno</span><br><span class="line"><span class="built_in">where</span> sc.score&lt;60;</span><br></pre></td></tr></table></figure>

<p>查询oldguo所教的不及格的学生姓名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select teacher.tname,student.sname,course.cname,sc.score  </span><br><span class="line">from teacher </span><br><span class="line">join course </span><br><span class="line">on teacher.tno=course.tno  </span><br><span class="line">join sc </span><br><span class="line">on course.cno=sc.cno </span><br><span class="line">join student </span><br><span class="line">on sc.sno=student.sno </span><br><span class="line"><span class="built_in">where</span> teacher.tname=<span class="string">'oldguo'</span> and sc.score&lt;60 ;</span><br></pre></td></tr></table></figure>

<p>每位老师所教课程的平均分,并按平均分排序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select teacher.tname , course.cname , avg(sc.score)  </span><br><span class="line">from teacher </span><br><span class="line">join course </span><br><span class="line">on teacher.tno=course.tno  </span><br><span class="line">join sc </span><br><span class="line">on course.cno=sc.cno</span><br><span class="line">group by course.cno ;</span><br></pre></td></tr></table></figure>

<p>查询平均成绩大于60分的同学的学号和平均成绩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select student.sno,avg(sc.score)</span><br><span class="line">from student </span><br><span class="line">join sc on student.sno=sc.sno </span><br><span class="line">group by sc.sno</span><br><span class="line">having avg(sc.score)&gt;60;</span><br></pre></td></tr></table></figure>

<p>查询所有同学的学号、姓名、选课数、总成绩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.sno,student.sname,COUNT(sc.cno),SUM(sc.score)</span><br><span class="line">FROM student</span><br><span class="line">JOIN sc</span><br><span class="line">ON student.sno=sc.sno</span><br><span class="line">GROUP BY student.sno;</span><br></pre></td></tr></table></figure>

<p>查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT sc.cno,MAX(sc.score),MIN(sc.score)</span><br><span class="line">FROM sc</span><br><span class="line">GROUP BY sc.cno;</span><br></pre></td></tr></table></figure>

<p>统计各位老师,所教课程的及格率</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT teacher.tname,course.cname,CONCAT(COUNT(sc.score&gt;60 OR NULL)/COUNT(sc.score)*100,<span class="string">"%"</span>) AS 及格率 </span><br><span class="line">FROM teacher </span><br><span class="line">JOIN course</span><br><span class="line">ON teacher.tno=course.tno </span><br><span class="line">JOIN sc</span><br><span class="line">ON course.cno=sc.cno </span><br><span class="line">GROUP BY sc.cno;</span><br></pre></td></tr></table></figure>

<p>查询每门课程被选修的学生数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT course.cname,COUNT(sc.sno)</span><br><span class="line">FROM course</span><br><span class="line">JOIN sc</span><br><span class="line">ON course.cno=sc.cno </span><br><span class="line">GROUP BY sc.cno;</span><br></pre></td></tr></table></figure>

<p>查询出只选修了一门课程的全部学生的学号和姓名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.sno,student.sname</span><br><span class="line">FROM student</span><br><span class="line">JOIN sc</span><br><span class="line">ON student.sno=sc.sno</span><br><span class="line">GROUP BY sc.sno</span><br><span class="line">HAVING COUNT(sc.cno)=1;</span><br></pre></td></tr></table></figure>

<p>查询选修课程门数超过1门的学生信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.sno,student.sname</span><br><span class="line">FROM student</span><br><span class="line">JOIN sc</span><br><span class="line">ON student.sno=sc.sno</span><br><span class="line">GROUP BY sc.sno</span><br><span class="line">HAVING COUNT(sc.cno)&gt;1;</span><br></pre></td></tr></table></figure>

<p>统计每门课程:优秀(85分以上),良好(70-85),一般(60-70),不及格(小于60)的学生列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT course.cname,GROUP_CONCAT(CASE WHEN sc.score&gt;85 THEN student.sname END) AS 优秀,</span><br><span class="line">GROUP_CONCAT(CASE WHEN sc.score&gt;70 AND sc.score&lt;85 THEN student.sname END) AS 良好,</span><br><span class="line">GROUP_CONCAT(CASE WHEN sc.score&gt;65 AND sc.score&lt;70 THEN student.sname END) AS 一般,</span><br><span class="line">GROUP_CONCAT(CASE WHEN sc.score&lt;65 THEN student.sname END) AS 不及格</span><br><span class="line">FROM student</span><br><span class="line">JOIN sc </span><br><span class="line">ON student.sno=sc.sno </span><br><span class="line">JOIN course</span><br><span class="line">ON sc.cno=course.cno </span><br><span class="line">GROUP BY course.cno;</span><br></pre></td></tr></table></figure>

<p>查询平均成绩大于85的所有学生的学号、姓名和平均成绩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.sno,student.sname,AVG(sc.score)</span><br><span class="line">FROM student</span><br><span class="line">JOIN sc</span><br><span class="line">ON student.sno=sc.sno</span><br><span class="line">GROUP BY sc.sno</span><br><span class="line">HAVING AVG(sc.score)&gt;85;</span><br></pre></td></tr></table></figure>

<h2 id="第8章-show"><a href="#第8章-show" class="headerlink" title="第8章 show"></a>第8章 show</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">show databases    </span><br><span class="line">show tables </span><br><span class="line">show tables from world</span><br><span class="line">show create database world </span><br><span class="line">show create table city </span><br><span class="line">show create table world.city </span><br><span class="line">show grants <span class="keyword">for</span> root@<span class="string">'localhost'</span></span><br><span class="line">show processlist</span><br><span class="line">show charset</span><br><span class="line">show collation</span><br><span class="line">show variables                   <span class="comment">#查看所有参数</span></span><br><span class="line">show variables like <span class="string">'%trx%'</span>      <span class="comment">#模糊查询参数</span></span><br><span class="line">show engines                     <span class="comment">#查询MySQL支持的所有存储引擎</span></span><br><span class="line">show status                      <span class="comment">#查看MySQL所有工作状态信息</span></span><br><span class="line">show status like <span class="string">'%innodb%'</span>      <span class="comment">#模糊查询MySQL的某些状态信息</span></span><br><span class="line">show engine innodb status \G     <span class="comment">#查看InnoDB引擎相关信息</span></span><br><span class="line">show index from city;            <span class="comment">#查看city表的排索引情况</span></span><br><span class="line">show binary logs;			     <span class="comment">#所有二进制日志的列表 </span></span><br><span class="line">show binlog events <span class="keyword">in</span> <span class="string">'xxxx'</span>     <span class="comment">#查看二进制日志事件信息 </span></span><br><span class="line">show master status               <span class="comment">#二进制日志当前使用情况</span></span><br><span class="line">show slave status\G              <span class="comment">#查看从库状态信息</span></span><br><span class="line">show relaylog events <span class="keyword">in</span> <span class="string">'xxxx'</span>   <span class="comment">#查看从库的中继日志事件信息.</span></span><br></pre></td></tr></table></figure>

<h2 id="第9章-元数据"><a href="#第9章-元数据" class="headerlink" title="第9章 元数据"></a>第9章 元数据</h2><h3 id="9-1-元数据介绍"><a href="#9-1-元数据介绍" class="headerlink" title="9.1 元数据介绍"></a>9.1 元数据介绍</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据字典信息(表结构信息),</span><br><span class="line">表属性(引擎,字符集,校对....),</span><br><span class="line">库属性</span><br><span class="line">权限,状态....</span><br></pre></td></tr></table></figure>

<h3 id="9-2-元数据控制"><a href="#9-2-元数据控制" class="headerlink" title="9.2 元数据控制"></a>9.2 元数据控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"基表"</span> 存储</span><br><span class="line">DDL,DCL专用语句进行: 创建create,删除drop,修改alter</span><br><span class="line">show 语句 查询部分元数据</span><br><span class="line">information_schema.xxxx</span><br></pre></td></tr></table></figure>

<h3 id="9-3-information-schema-常用视图"><a href="#9-3-information-schema-常用视图" class="headerlink" title="9.3 information_schema 常用视图"></a>9.3 information_schema 常用视图</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DESC TABLES;</span><br><span class="line">TABLE_SCHEMA              <span class="comment">#表所在的库</span></span><br><span class="line">TABLE_NAME                <span class="comment">#表名</span></span><br><span class="line">ENGINE                    <span class="comment">#表引擎</span></span><br><span class="line">TABLE_ROWS                <span class="comment">#数据行</span></span><br><span class="line">AVG_ROW_LENGTH            <span class="comment">#平均行长度</span></span><br><span class="line">INDEX_LENGTH 		  	  <span class="comment">#索引长度</span></span><br></pre></td></tr></table></figure>

<p>1.查询world库下所有的表名信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_name FROM information_schema.tables </span><br><span class="line">WHERE table_schema=<span class="string">'world'</span>;</span><br><span class="line">SHOW TABLES FROM world;</span><br></pre></td></tr></table></figure>

<p>2.统计所有库下的表个数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_schema,COUNT(table_name)</span><br><span class="line">FROM information_schema.tables </span><br><span class="line">GROUP BY table_schema;</span><br></pre></td></tr></table></figure>

<p>3.统计每个数据库下的表的个数,名称</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_schema,COUNT(table_name),GROUP_CONCAT(table_name)</span><br><span class="line">FROM information_schema.tables </span><br><span class="line">GROUP BY table_schema;</span><br></pre></td></tr></table></figure>

<p>4.统计每个数据库(生产库)下的表的个数,名称,要求表名后跟表注释</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#提示: NOT IN (sys,information_schema,performance_schema,mysql)</span></span><br><span class="line"></span><br><span class="line">SELECT table_schema,COUNT(table_name),GROUP_CONCAT(CONCAT(table_name,<span class="string">"("</span>,table_comment,<span class="string">")"</span>))</span><br><span class="line">FROM information_schema.tables </span><br><span class="line">WHERE table_schema NOT IN (<span class="string">'sys'</span>,<span class="string">'information_schema'</span>,<span class="string">'performance_schema'</span>,<span class="string">'mysql'</span>)</span><br><span class="line">GROUP BY table_schema;</span><br></pre></td></tr></table></figure>

<p>5.统计全库数据量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TABLE_ROWS                <span class="comment">#数据行</span></span><br><span class="line">AVG_ROW_LENGTH            <span class="comment">#平均行长度</span></span><br><span class="line">INDEX_LENGTH 		      <span class="comment">#索引长度</span></span><br><span class="line"></span><br><span class="line">SELECT SUM(TABLE_ROWS*AVG_ROW_LENGTH+INDEX_LENGTH)/1024/1024 AS total_size_mb</span><br><span class="line">FROM information_schema.tables ;</span><br></pre></td></tr></table></figure>

<p>6.统计每个业务库的总大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_schema,SUM(TABLE_ROWS*AVG_ROW_LENGTH+INDEX_LENGTH)/1024/1024 AS total_size_mb</span><br><span class="line">FROM information_schema.tables</span><br><span class="line">WHERE table_schema NOT IN (<span class="string">'sys'</span>,<span class="string">'information_schema'</span>,<span class="string">'performance_schema'</span>,<span class="string">'mysql'</span>)</span><br><span class="line">GROUP BY table_schema ;</span><br></pre></td></tr></table></figure>

<p>7.统计下city表的大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_name , (TABLE_ROWS*AVG_ROW_LENGTH+INDEX_LENGTH)/1024/1024 AS mb </span><br><span class="line">FROM information_schema.tables</span><br><span class="line">WHERE table_schema=<span class="string">'world'</span> AND table_name=<span class="string">'city'</span>;</span><br></pre></td></tr></table></figure>

<p>8.拼接:批量生成命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p123 world city &gt;/backup/world_city.sql </span><br><span class="line">mysqldump -uroot -p123 world country &gt;/backup/world_country.sql </span><br><span class="line">mysqldump -uroot -p123 school student &gt;/backup/school_student.sql </span><br><span class="line"></span><br><span class="line">SELECT CONCAT(<span class="string">"mysqldump -uroot -p123 "</span>,table_schema,<span class="string">" "</span>,table_name,<span class="string">" &gt;/BACKUP/"</span>,table_schema,<span class="string">"_"</span>,table_name,<span class="string">".sql"</span>)</span><br><span class="line">FROM information_schema.tables INTO OUTFILE <span class="string">'/tmp/bak.sh'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>columns (数据字典统计)</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#统计school数据库下的表的数据字典信息</span></span><br><span class="line">SELECT table_name,column_name ,data_type,column_comment</span><br><span class="line">FROM information_schema.columns</span><br><span class="line">WHERE table_schema=<span class="string">'school'</span>;</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Wu Fei</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://linuxwf.com/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/">http://linuxwf.com/2020/04/15/3-SQL%E5%9F%BA%E7%A1%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://linuxwf.com" target="_blank">WF's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a></div><div class="post_share"><div class="social-share" data-image="/img/63199486_p0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/15/4-%E7%B4%A2%E5%BC%95%E5%8F%8A%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/"><img class="prev_cover lazyload" data-src="/img/63199486_p0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">4.索引及执行计划</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/15/2-MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%A1%E7%90%86/"><img class="next_cover lazyload" data-src="/img/63199486_p0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2.MySQL体系结构及管理</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/04/15/1-数据库介绍和MySQL安装/" title="1.数据库介绍和MySQL安装"><img class="relatedPosts_cover lazyload"data-src="/img/wallhaven-2714.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">1.数据库介绍和MySQL安装</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/10-读写分离架构-Atlas/" title="10.读写分离架构-Atlas"><img class="relatedPosts_cover lazyload"data-src="/img/wallpaper-2476168.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">10.读写分离架构-Atlas</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/11-分布式架构-MyCAT/" title="11.分布式架构-MyCAT"><img class="relatedPosts_cover lazyload"data-src="/img/wallhaven-106451.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">11.分布式架构-MyCAT</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/2-MySQL体系结构及管理/" title="2.MySQL体系结构及管理"><img class="relatedPosts_cover lazyload"data-src="/img/63199486_p0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">2.MySQL体系结构及管理</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/4-索引及执行计划/" title="4.索引及执行计划"><img class="relatedPosts_cover lazyload"data-src="/img/63199486_p0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">4.索引及执行计划</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/5-存储引擎/" title="5.存储引擎"><img class="relatedPosts_cover lazyload"data-src="/img/wallhaven-630117.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">5.存储引擎</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: false,
  appId: 'mJGbzahn0dOntrhO5Hek8Rjd-gzGzoHsz',
  appKey: 'b0O75eIR8ULkl2kyDWLgLXM0',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" style="background-image: url(/img/wallhaven-33397.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Wu Fei</div><div class="footer_custom_text">Hi, welcome to my <a href="https://www.linuxwf.com/" target="_blank" rel="noopener">blog</a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备19138449号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode far fa-moon" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/algolia.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":100,"vOffset":-50},"mobile":{"show":true,"scale":0.5}});</script></body></html>