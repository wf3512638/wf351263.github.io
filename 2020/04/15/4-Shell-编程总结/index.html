<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>4.Shell 编程总结 | WF's Blog</title><meta name="description" content="4.Shell 编程总结"><meta name="keywords" content="shell"><meta name="author" content="Wu Fei"><meta name="copyright" content="Wu Fei"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="4.Shell 编程总结"><meta name="twitter:description" content="4.Shell 编程总结"><meta name="twitter:image" content="http://linuxwf.com/img/post.jpg"><meta property="og:type" content="article"><meta property="og:title" content="4.Shell 编程总结"><meta property="og:url" content="http://linuxwf.com/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/"><meta property="og:site_name" content="WF's Blog"><meta property="og:description" content="4.Shell 编程总结"><meta property="og:image" content="http://linuxwf.com/img/post.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://linuxwf.com/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/"><link rel="prev" title="1.DevOps" href="http://linuxwf.com/2020/04/15/1-DevOps/"><link rel="next" title="3.if语句和case语句" href="http://linuxwf.com/2020/04/15/3-if%E8%AF%AD%E5%8F%A5%E5%92%8Ccase%E8%AF%AD%E5%8F%A5/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bf8fa809dbe0a82b3d983accb9d256fe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"GQXJKQPX6A","apiKey":"9d6901decfc3e9736a8f99965d4fc700","indexName":"my_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: true,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="WF's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">62</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">45</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell-编程总结"><span class="toc-number">1.</span> <span class="toc-text">Shell 编程总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第1章-基础知识"><span class="toc-number">1.1.</span> <span class="toc-text">第1章 基础知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第2章-脚本案例"><span class="toc-number">1.2.</span> <span class="toc-text">第2章 脚本案例</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/post.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">WF's Blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">4.Shell 编程总结</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-15 11:38:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-04-15 11:39:27"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-04-15</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Shell%E7%BC%96%E7%A8%8B/">Shell编程</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon far fa-file-word" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">4.4k</span><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-clock" aria-hidden="true"></i><span>阅读时长: 19 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-comments" aria-hidden="true"></i><span>评论数:</span><a href="/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="Shell-编程总结"><a href="#Shell-编程总结" class="headerlink" title="Shell 编程总结"></a>Shell 编程总结</h1><h2 id="第1章-基础知识"><a href="#第1章-基础知识" class="headerlink" title="第1章 基础知识"></a>第1章 基础知识</h2><p><strong>1.linux下默认的shell是?</strong>   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash</span><br></pre></td></tr></table></figure>

<p><strong>2.shell脚本书写规范?</strong></p>
<p>1.shell脚本存放统一的目录 /server/scripts</p>
<p>2.脚本名字的结尾使用.sh</p>
<p>3.脚本的开头 必须有解释器 #!/bin/bash</p>
<p>4.脚本内有作者信息 脚本信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Date: 20111111</span></span><br><span class="line"><span class="comment">#Author: wufei</span></span><br><span class="line"><span class="comment">#Blog:            #博客</span></span><br><span class="line"><span class="comment">#Descriptsion:    #描述</span></span><br><span class="line"><span class="comment">#Version： 1.0    #版本</span></span><br></pre></td></tr></table></figure>

<p>5.每段代码块有注释(尽量使用英文)</p>
<p>6.标点符号 (语法尽量一次性书写完毕</p>
<p>7.成对的符号 一次性书写完毕</p>
<p><strong>3.执行脚本的三种方法?</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法1：直接使用解释器执行</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># bash hello.sh </span></span><br><span class="line">hello world!</span><br><span class="line"><span class="comment">#方法2: 全路径方式执行 需要执行权限</span></span><br><span class="line"><span class="comment"># chmod +x hello.sh</span></span><br><span class="line">[root@backup ~]<span class="comment"># . /server/scripts/hello.sh </span></span><br><span class="line">hello world!</span><br><span class="line"><span class="comment">#方法3 source .执行脚本  子shell中的内容调用到父shell中执行</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># source hello.sh </span></span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>

<p><strong>4.变量可分为两类？</strong></p>
<p>变量可分为两类：环境变量（全局变量）和普通变量（局部变量）</p>
<p>全局变量(环境变量) 针对系统所有用户生效</p>
<p>局部变量(普通变量) 针对当前登录用户生效</p>
<p><strong>5.如何显示默认的环境变量**</strong></p>
<p>1.使用echo命令查看单个环境变量。例如： echo $PATH </p>
<p>2.使用env查看所有环境变量。例如： env </p>
<p>3.使用set查看所有本地定义的环境变量。</p>
<p><strong>6.如何设置环境变量与局部变量</strong></p>
<p>1.在/etc/profile文件中添加变量【对所有用户生效(永久的)】，注意：修改文件后要想马上生效还要运行# source /etc/profile不然只能在下次重进此用户时生效。</p>
<p>2.在用户目录下的.bash_profile文件中增加变量【对单一用户生效(永久的)】</p>
<p>3.直接运行export命令定义变量【只对当前shell(BASH)有效(临时的)】</p>
<p><strong>7.定义变量内容，不加引号、单引号、双引号、反引号结果有什么不同？应该怎么用？</strong></p>
<p>不加引号：直接定义变量的内容，一般用于连续的数字、字符串、路径名等</p>
<p>单引号：所见即所得，引号内是什么就输出什么</p>
<p>双引号：输出变量内容时引号的变量及命令会经过解析后再输出内容</p>
<p>反引号：一般用于引用命令，执行的时候命令会被执行，相当于S0，赋值和输出都要用引号将命令引起来</p>
<p><strong>8.以下参数含义</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>$0</td>
<td>获取当前执行的shell脚本的文件名，如果包含路径，则包括脚本路径</td>
</tr>
<tr>
<td>$n</td>
<td>获取当前执行脚本的第n个参数值，参数从$1开始 $9 以后需要加{}</td>
</tr>
<tr>
<td>$#</td>
<td>获取当前执行的脚本后面接的参数的总个数</td>
</tr>
<tr>
<td>$*</td>
<td>脚本所有传参的参数，加双引号将所有参数视为一个整体</td>
</tr>
<tr>
<td>$@</td>
<td>脚本所有传参的参数，加双引号将所有参数视为不通的独立字符串</td>
</tr>
<tr>
<td>$?</td>
<td>上一个指令的状态返回值（0为成功，非0失败）</td>
</tr>
<tr>
<td>$$</td>
<td>当前执行脚本的PID进程号</td>
</tr>
<tr>
<td>$!</td>
<td>上一个在后台工作的进程的PID</td>
</tr>
<tr>
<td>$_</td>
<td>获取在此之前的命令或脚本的最后一个参数</td>
</tr>
</tbody></table>
<p><strong>9.echo参数含义</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>不换行输出内容</td>
</tr>
<tr>
<td>-e</td>
<td>解析转义字符</td>
</tr>
<tr>
<td><strong>转义字符</strong></td>
<td></td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\t</td>
<td>制表符(tab)</td>
</tr>
<tr>
<td>\b</td>
<td>退格</td>
</tr>
<tr>
<td>\v</td>
<td>纵向制表符</td>
</tr>
</tbody></table>
<p><strong>10.变量传参的三种方式？</strong></p>
<p>1.直接传参</p>
<p>2.赋值传参</p>
<p>3.read传参</p>
<p><strong>11.统计字符串长度？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo $test</span></span><br><span class="line">I am oldboy</span><br><span class="line"><span class="comment"># echo $&#123;#test&#125;   #变量前加#可以打印变量的长度</span></span><br><span class="line">11</span><br><span class="line"><span class="comment"># echo $test|wc -L  </span></span><br><span class="line">11</span><br><span class="line"><span class="comment"># expr length "$test"</span></span><br><span class="line">11</span><br><span class="line"><span class="comment"># echo $test|awk '&#123;print length&#125;'</span></span><br><span class="line">11</span><br></pre></td></tr></table></figure>

<p><strong>12.输出字符串长度小于3的单词</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat for.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> I am lizhenya teacher I am 18</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   [ <span class="variable">$&#123;#i&#125;</span> -lt 3 ] &amp;&amp; <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh for.sh </span></span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">18</span><br><span class="line"></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># echo "I am lizhenya teacher I am 18"|xargs -n1|awk '&#123;if(length&lt;3)print&#125;'</span></span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">18</span><br><span class="line"></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># echo "I am lizhenya teacher I am 18"|xargs -n1|awk '&#123;for(i=1;i&lt;=NF;i++)if(length&lt;3)print&#125;'</span></span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">I</span><br><span class="line">am</span><br><span class="line">18</span><br></pre></td></tr></table></figure>

<p><strong>13.变量子串的删除和替换</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#截取从第二个字符之后的内容，不包含第二个字符</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># echo $test</span></span><br><span class="line">I am oldboy</span><br><span class="line">[root@backup /server/scripts]<span class="comment"># </span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># echo $&#123;test:2&#125;</span></span><br><span class="line">am oldboy</span><br><span class="line"><span class="comment">#从第二个字符开始截取之后的二个字符</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># echo $&#123;test:2:2&#125;</span></span><br><span class="line">am</span><br></pre></td></tr></table></figure>

<p><strong>14.写出下面特殊变量扩展的意义</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;oldboy&#125;</span>	   <span class="comment">#返回变量$oldboy的内容</span></span><br><span class="line"><span class="variable">$&#123;#oldboy&#125;</span>	   <span class="comment">#返回变量$oldboy的内容的字符长度</span></span><br><span class="line"><span class="variable">$&#123;url#*.&#125;</span>      <span class="comment">#从.开始删除前面的内容输出</span></span><br><span class="line"><span class="variable">$&#123;url##*.&#125;</span>	   <span class="comment">#从.开始删除最后一个.后面的内容输出</span></span><br><span class="line"><span class="variable">$&#123;url%.*&#125;</span>	   <span class="comment">#删除最后一个.后面的内容输出</span></span><br><span class="line"><span class="variable">$&#123;url%%.*&#125;</span>     <span class="comment">#删除第一个.后面的内容输出</span></span><br></pre></td></tr></table></figure>

<p><strong>15.常见的Shell算术运算符</strong></p>
<table>
<thead>
<tr>
<th>算术运算符</th>
<th>意义（*表示常用）</th>
</tr>
</thead>
<tbody><tr>
<td>+ 、-</td>
<td>加（或正号）、减（或负号）*</td>
</tr>
<tr>
<td>*、/、%</td>
<td>乘法、除法、取余 *</td>
</tr>
<tr>
<td>**</td>
<td>冥运算 *</td>
</tr>
<tr>
<td>++ 、–</td>
<td>增加、减少，可前置也可放在变量的结尾 *</td>
</tr>
<tr>
<td>！、&amp;&amp;、||</td>
<td>非（取反）、相当于and 、相当于or *</td>
</tr>
<tr>
<td>&lt; 、&lt;= 、&gt; 、&gt;=</td>
<td>比较符号（小于、小于等于、大于、大于等于）</td>
</tr>
<tr>
<td>== 、!= 、=</td>
<td>比较符号 （相等、不相等、对于字符串=也可表示相当于）*</td>
</tr>
<tr>
<td>&lt;&lt; 、&gt;&gt;</td>
<td>向左移位、向右移位</td>
</tr>
<tr>
<td>~ 、| 、&amp; 、^</td>
<td>按位取反、按位异或、按位于、按位或</td>
</tr>
<tr>
<td>= 、+=、-= 、*= 、%=</td>
<td>赋值运算符，例如 a+=1 相当于 a=a+1 , a-=1 相当于 a=a-1 *</td>
</tr>
</tbody></table>
<p><strong>16.常见的运算命令</strong></p>
<table>
<thead>
<tr>
<th>运算操作符号与运算命令</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>(())</td>
<td>用于整数的运算、效率很高</td>
</tr>
<tr>
<td>let</td>
<td>用于证书运算，类似于(())</td>
</tr>
<tr>
<td>expr</td>
<td>可用于整数运算，还有其他功能</td>
</tr>
<tr>
<td>bc</td>
<td>Linux下的计算程序、可用于整数及小数运算</td>
</tr>
<tr>
<td>$[]</td>
<td>用于整数运算</td>
</tr>
<tr>
<td>awk</td>
<td>awk既可用于整数运算，也可用于小数运算</td>
</tr>
<tr>
<td>declare</td>
<td>定义变量值和属性，-i参数可用于定义整形变量，做运算</td>
</tr>
</tbody></table>
<p><strong>17.常用的条件表达式</strong></p>
<table>
<thead>
<tr>
<th>语法</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>test -f file</td>
<td>表示如果file文件存在，则为真（0），否则为假（非0）</td>
</tr>
<tr>
<td>test -z</td>
<td>表示如果字符串长度是为0，则表达式成立</td>
</tr>
<tr>
<td>[ -e file ]</td>
<td>文件存在则为真</td>
</tr>
<tr>
<td>[ -f file ]</td>
<td>是否存在并且为普通文件</td>
</tr>
<tr>
<td>[ -d file ]</td>
<td>是否为目录</td>
</tr>
<tr>
<td>[ -r file ]</td>
<td>是否可读</td>
</tr>
<tr>
<td>[ -w file ]</td>
<td>是否可写</td>
</tr>
<tr>
<td>[ -x file ]</td>
<td>是否可执行</td>
</tr>
</tbody></table>
<p><strong>18.数值表达式</strong></p>
<p>[ 整数1 比较符 整数2 ]</p>
<table>
<thead>
<tr>
<th>在[]以及test 中使用的比较符号</th>
<th>在(())和[[]] 中使用的比较符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-eq</td>
<td>== 或 =</td>
<td>等于</td>
</tr>
<tr>
<td>-ne</td>
<td>!=</td>
<td>不等于</td>
</tr>
<tr>
<td>-gt</td>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>-ge</td>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>-lt</td>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>-le</td>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
</tbody></table>
<p><strong>19.循环控制及状态返回值参数</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>exit</td>
<td>退出脚本</td>
</tr>
<tr>
<td>return</td>
<td>退出函数</td>
</tr>
<tr>
<td>local</td>
<td>局部变量</td>
</tr>
<tr>
<td>breadk</td>
<td>跳出循环体</td>
</tr>
<tr>
<td>continue</td>
<td>跳过本次循环，进行下一次循环</td>
</tr>
</tbody></table>
<h2 id="第2章-脚本案例"><a href="#第2章-脚本案例" class="headerlink" title="第2章 脚本案例"></a>第2章 脚本案例</h2><p><strong>1.查看磁盘/当前使用状态，如果使用率超过80%则把结果输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line">	usedisk&#x3D;&#96;df -h|awk &#39;NR&#x3D;&#x3D;2&#123;print $(NF-1)&#125;&#39;&#96;</span><br><span class="line">	[ $&#123;usedisk%\%&#125; -gt 80 ] &amp;&amp; echo &quot;send mail 当前使用为$usedisk&quot; || echo &quot;磁盘使用正常,当前使用率为$usedisk&quot;</span><br><span class="line">	[ &#96;df -h|awk -F &quot;[ %]+&quot; &#39;NR&#x3D;&#x3D;2&#123;print $(NF-1)&#125;&#39;&#96; -gt 5 ] &amp;&amp; echo &quot;send mail&quot; || echo &quot;磁盘使用正常&quot;</span><br></pre></td></tr></table></figure>

<p>统计磁盘使用率 如果磁盘使用率大于 5% 则发邮件报警 当前使用率为? 小于5% 则提示磁盘使用正常 当前使用率为?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat disk.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">	usedisk=`df -h|awk <span class="string">'NR==2&#123;print $(NF-1)&#125;'</span>`</span><br><span class="line">	[ <span class="variable">$&#123;usedisk%\%&#125;</span> -gt 80 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"send mail 当前使用为<span class="variable">$usedisk</span>"</span> || <span class="built_in">echo</span> <span class="string">"磁盘使用正常,当前使用率为<span class="variable">$usedisk</span>"</span></span><br><span class="line">	[ `df -h|awk -F <span class="string">"[ %]+"</span> <span class="string">'NR==2&#123;print $(NF-1)&#125;'</span>` -gt 5 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"send mail"</span> || <span class="built_in">echo</span> <span class="string">"磁盘使用正常"</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh disk.sh </span></span><br><span class="line">磁盘使用正常,当前使用率为4%</span><br><span class="line">磁盘使用正常</span><br></pre></td></tr></table></figure>

<p><strong>2.加大文件描述符</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'*                -       nofile          65535'</span>&gt;&gt;/etc/security/limits.conf</span><br></pre></td></tr></table></figure>

<p><strong>3.使用脚本 统计系统的 主机名 IP地址 虚拟平台 版本号 磁盘使用率 内存使用率 外网IP地址</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat os.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">eth0=$(ip a|awk <span class="string">'BEGIN&#123;FS="[ /]+"&#125;/eth0$/&#123;print $3&#125;'</span>)</span><br><span class="line">eth1=$(ip a|awk <span class="string">'BEGIN&#123;FS="[ /]+"&#125;/eth1$/&#123;print $3&#125;'</span>)</span><br><span class="line">net_IP=$(curl -s ifconfig.me)  <span class="comment"># 或者 curl icanhazip.com</span></span><br><span class="line">VMW=$(hostnamectl | awk <span class="string">'/Virtuali/&#123;print $NF&#125;'</span>)</span><br><span class="line">version=$(awk <span class="string">'&#123;print $1,$(NF-1)&#125;'</span> /etc/redhat-release)</span><br><span class="line">disk=$(df|awk <span class="string">'NR==2&#123;print $(NF-1)&#125;'</span>)</span><br><span class="line">mem=<span class="string">"<span class="variable">$(free|awk 'NR==2&#123;print $3/$2*100&#125;')</span>%"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"内网IP为：<span class="variable">$&#123;eth0&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"外网IP为：<span class="variable">$&#123;eth1&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"公网IP为：<span class="variable">$&#123;net_IP&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"虚拟平台为：<span class="variable">$&#123;VMW&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"操作系统为：<span class="variable">$&#123;version&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"磁盘使用率为：<span class="variable">$&#123;disk&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"内存使用率为：<span class="variable">$&#123;mem&#125;</span>"</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh os.sh </span></span><br><span class="line">内网IP为：10.0.1.41</span><br><span class="line">外网IP为：172.16.1.41</span><br><span class="line">公网IP为：113.88.12.225</span><br><span class="line">虚拟平台为：vmware</span><br><span class="line">操作系统为：CentOS 7.4.1708</span><br><span class="line">磁盘使用率为：4%</span><br><span class="line">内存使用率为：10.2867%</span><br></pre></td></tr></table></figure>

<p><strong>4.反向破解 RANDOM 0-32767</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">案例:反向破解 RANDOM 0-32767</span><br><span class="line">d2c74151</span><br><span class="line">a9982990</span><br><span class="line">4462a9fd</span><br><span class="line">b195fe48</span><br><span class="line">5e77d38</span><br><span class="line">[root@backup /server/scripts]<span class="comment"># cat RANDOM.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..32767&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   num1=`<span class="built_in">echo</span> <span class="variable">$i</span>|md5sum|cut -c1-8`</span><br><span class="line">   [ <span class="variable">$num1</span> = <span class="string">"d2c74151"</span> -o <span class="variable">$num1</span> = <span class="string">"a9982990"</span> -o <span class="variable">$num1</span> = <span class="string">"4462a9fd"</span> -o <span class="variable">$num1</span> = <span class="string">"b195fe48"</span> ];</span><br><span class="line">   [ $? = 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"<span class="variable">$num1</span> is <span class="variable">$i</span>"</span></span><br><span class="line">   num2=`<span class="built_in">echo</span> <span class="variable">$i</span>|md5sum|cut -c1-7`</span><br><span class="line">   [ <span class="variable">$num2</span> = <span class="string">"5e77d38"</span> ];[ $? = 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"<span class="variable">$num2</span> is <span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh RANDOM.sh </span></span><br><span class="line">4462a9fd is 2458</span><br><span class="line">5e77d38 is 2945</span><br><span class="line">d2c74151 is 6420</span><br><span class="line">a9982990 is 13008</span><br><span class="line">b195fe48 is 29193</span><br></pre></td></tr></table></figure>

<p><strong>5.使用if分支 来比较两个数字的大小</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat count.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input two number: "</span> num1 num2</span><br><span class="line"><span class="keyword">if</span> [[ ! <span class="string">"<span class="variable">$num1</span>"</span> =~ ^[0-9]+$ || ! <span class="string">"<span class="variable">$num2</span>"</span> =~ ^[0-9]+$ ]]</span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"请输入正确的整数"</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num1</span> -gt <span class="variable">$num2</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$num1</span>&gt;<span class="variable">$num2</span>"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$num1</span> -lt <span class="variable">$num2</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$num1</span>&lt;<span class="variable">$num2</span>"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$num1</span>=<span class="variable">$num2</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh count.sh </span></span><br><span class="line">please input two number: 10 20</span><br><span class="line">10&lt;20</span><br></pre></td></tr></table></figure>

<p><strong>6.随机生成一个随机数1-100 判断生成的随机数和输入的随机数是否相等,如果相等则退出,大了提示大了,小则提示小了,总共猜了多少次</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat 1_100.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">ran=`<span class="built_in">echo</span> $((RANDOM%100+1))`</span><br><span class="line">&gt; ran.txt</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请回车开始系统自动猜: "</span> re</span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$re</span> <span class="keyword">in</span></span><br><span class="line">	y)</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	ra=`<span class="built_in">echo</span> $((RANDOM%100+1))`	</span><br><span class="line">		<span class="keyword">if</span> [ `grep -w <span class="variable">$ra</span> ran.txt|wc -l` -eq 1  ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">continue</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$ra</span> -gt <span class="variable">$ran</span> ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"系统猜的数字为 <span class="variable">$ra</span> 猜大了"</span></span><br><span class="line">	 	<span class="built_in">echo</span> <span class="variable">$ra</span> &gt;&gt; ran.txt</span><br><span class="line">	<span class="keyword">elif</span> [ <span class="variable">$ra</span> -lt <span class="variable">$ran</span> ];<span class="keyword">then</span></span><br><span class="line">	   	<span class="built_in">echo</span> <span class="string">"系统猜的数字为 <span class="variable">$ra</span> 猜小了"</span></span><br><span class="line">	 	<span class="built_in">echo</span> <span class="variable">$ra</span> &gt;&gt; ran.txt</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"系统猜对了数字为<span class="variable">$ra</span>"</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"总共猜了 <span class="variable">$i</span> 次"</span></span><br><span class="line">		<span class="built_in">exit</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">		<span class="built_in">let</span> i++</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	;;</span><br><span class="line">	*)</span><br><span class="line">	<span class="built_in">echo</span> hehe</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><strong>7.按照系统版本号的不同 更改默认YUM源</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat yum.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. /etc/init.d/<span class="built_in">functions</span></span><br><span class="line">os=`cat /etc/redhat-release |awk <span class="string">'&#123;print $4&#125;'</span>`</span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">"<span class="variable">$os</span>"</span> = <span class="string">"(Final)"</span> ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		os=`cat /etc/redhat-release|awk <span class="string">'&#123;print $3&#125;'</span>`</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">		ping -c 1 -W1 www.baidu.com &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">	systemctl restart network</span><br><span class="line">	action <span class="string">"请检查网络"</span> /bin/<span class="literal">false</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;os%%.*&#125;</span> -eq 7 ];<span class="keyword">then</span></span><br><span class="line">	mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line">	wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo &amp;&gt;/dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">	   action <span class="string">"yum源已更新完成......."</span> /bin/<span class="literal">true</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   action <span class="string">"yum源更新失败,请检查.."</span> /bin/<span class="literal">false</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$&#123;os%%.*&#125;</span> -eq 6 ];<span class="keyword">then</span></span><br><span class="line">	mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line">	wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">	   action <span class="string">"yum源已更新完成......."</span> /bin/<span class="literal">true</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   action <span class="string">"yum源更新失败,请检查.."</span> /bin/<span class="literal">false</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"请检查你的版本号"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@backup /server/scripts]<span class="comment"># sh yum.sh </span></span><br><span class="line">yum源已更新完成.......                                     [  OK  ]</span><br></pre></td></tr></table></figure>

<p><strong>8.nginx启动脚本</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat nginx_start.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">[ -f /etc/init.d/<span class="built_in">functions</span> ] &amp;&amp; . /etc/init.d/<span class="built_in">functions</span></span><br><span class="line">te=<span class="variable">$1</span></span><br><span class="line"><span class="function"><span class="title">test</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		action <span class="string">"Nginx <span class="variable">$te</span> is"</span> /bin/<span class="literal">true</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		action <span class="string">"Nginx <span class="variable">$te</span> is"</span> /bin/<span class="literal">false</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">  start)</span><br><span class="line">	/usr/sbin/nginx</span><br><span class="line">	<span class="built_in">test</span></span><br><span class="line">	;;</span><br><span class="line">  stop)</span><br><span class="line">	/usr/sbin/nginx -s stop</span><br><span class="line">	<span class="built_in">test</span></span><br><span class="line">	;;</span><br><span class="line"> restart)</span><br><span class="line">	/usr/sbin/nginx -s stop</span><br><span class="line">	sleep 1</span><br><span class="line">	/usr/sbin/nginx</span><br><span class="line">	<span class="built_in">test</span></span><br><span class="line">	;;</span><br><span class="line">reload)</span><br><span class="line">	/usr/sbin/nginx -s reload</span><br><span class="line">	<span class="built_in">test</span></span><br><span class="line">	;;</span><br><span class="line">status)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"WEB端口号: `netstat -tnulp|grep master|grep '\&lt;tcp\&gt;'|awk '&#123;print <span class="variable">$4</span>&#125;'`"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"WEB-PID: `ps axu|grep [n]ginx|grep master|awk '&#123;print <span class="variable">$2</span>&#125;'`"</span></span><br><span class="line">	;;</span><br><span class="line">     *)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|status|restart|reload&#125;"</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><strong>9.生活案例: 吃饭</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat eat.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">cat&lt;&lt;EOF</span><br><span class="line">1.皇萌鸡</span><br><span class="line">2.酸笋鱼</span><br><span class="line">3.瓦香鸡</span><br><span class="line">4.炒菜</span><br><span class="line">5.酸辣粉</span><br><span class="line">6.炒粉</span><br><span class="line">7.面</span><br><span class="line">8.饺子</span><br><span class="line">9.不吃</span><br><span class="line">EOF</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"想吃什么，请按回车键 :"</span> </span><br><span class="line">ran=`<span class="built_in">echo</span> $((RANDOM%9+1))`</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$ran</span> <span class="keyword">in</span></span><br><span class="line">	1)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"皇萌鸡"</span></span><br><span class="line">	;;</span><br><span class="line">	2)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"酸笋鱼"</span></span><br><span class="line">	;;</span><br><span class="line">	3)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"瓦香鸡"</span></span><br><span class="line">	;;</span><br><span class="line">	4)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"炒菜"</span></span><br><span class="line">	;;</span><br><span class="line">	5)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"酸辣粉"</span></span><br><span class="line">	;;</span><br><span class="line">	6)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"炒粉"</span></span><br><span class="line">	;;</span><br><span class="line">	7)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"面"</span></span><br><span class="line">	;;</span><br><span class="line">	8)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"饺子"</span></span><br><span class="line">	;;</span><br><span class="line">	9)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"不吃"</span></span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><strong>10.脚本批量创建10个用户，密码统一为123，需要对用户输入是否为数字和输入的名字是否为空做判断</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat useradd.sh </span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入用户名的前缀: "</span> prefix</span><br><span class="line">[ -z <span class="variable">$prefix</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"请输入前缀"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入要创建多少个用户: "</span> num</span><br><span class="line">expr 1 + <span class="variable">$num</span> &amp;&gt;/dev/null</span><br><span class="line">[ $? -ne 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"请输入整数"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq <span class="variable">$num</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$prefix</span><span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"你确定要创建以上用户吗?[y|yse|Y|YES|n|N|NO]"</span> re</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> `seq <span class="variable">$num</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	user=<span class="variable">$prefix</span><span class="variable">$n</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$re</span> <span class="keyword">in</span></span><br><span class="line">	   y|yes|Y|YES)</span><br><span class="line">			  id <span class="variable">$user</span> &amp;&gt;/dev/null</span><br><span class="line">			 <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">			mm=`mkpasswd -l 8`</span><br><span class="line">			 useradd <span class="variable">$user</span>  &amp;&amp; <span class="built_in">echo</span> <span class="variable">$mm</span>|passwd --stdin <span class="variable">$user</span> &amp;&gt;/dev/null</span><br><span class="line">			 [ $? -eq 0 ]  </span><br><span class="line">			<span class="comment">#echo -e "$user\t$mm" &gt;&gt; /tmp/useradd.txt</span></span><br><span class="line">			<span class="built_in">echo</span> -e <span class="string">"用户: <span class="variable">$user</span>\t创建成功\t密码是：<span class="variable">$mm</span>"</span></span><br><span class="line">			 <span class="keyword">else</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"用户已存在"</span></span><br><span class="line">			<span class="built_in">continue</span></span><br><span class="line">			 <span class="keyword">fi</span></span><br><span class="line">			;;</span><br><span class="line">		n|N|no|NO)</span><br><span class="line">			 <span class="built_in">echo</span> <span class="string">"不创建则退出"</span></span><br><span class="line">			 <span class="built_in">exit</span></span><br><span class="line">			 ;;</span><br><span class="line">			*)</span><br><span class="line">		<span class="built_in">read</span> -p <span class="string">"你确定要创建以上用户吗?[y|yse|Y|YES|n|N|NO]"</span> re	</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>11.简单jumpserver脚本</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat jum.sh </span></span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">menu</span></span>()&#123;</span><br><span class="line">cat&lt;&lt;EOF </span><br><span class="line">1)WEB01=10.0.1.7</span><br><span class="line">2)WEB02=10.0.1.8</span><br><span class="line">3)MySQL=10.0.1.51</span><br><span class="line">4)NFS=10.0.1.31</span><br><span class="line">5)BACKUP=10.0.1.41</span><br><span class="line">6)<span class="built_in">help</span></span><br><span class="line">EOF</span><br><span class="line">&#125;</span><br><span class="line">menu</span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo 不要乱输入,小心爆炸"</span> INT HUP TSTP</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入需要连接的服务器: "</span> num</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$num</span> <span class="keyword">in</span></span><br><span class="line">        1)</span><br><span class="line">         ssh 10.0.1.7</span><br><span class="line">        ;;</span><br><span class="line">        2)</span><br><span class="line">        ssh 10.0.1.8</span><br><span class="line">        ;;</span><br><span class="line">        3)</span><br><span class="line">        ssh 10.0.1.51</span><br><span class="line">        ;;</span><br><span class="line">        4)</span><br><span class="line">        ssh 10.0.1.31</span><br><span class="line">        ;;</span><br><span class="line">        5)</span><br><span class="line">        ssh 10.0.1.41</span><br><span class="line">        ;;</span><br><span class="line">        6|h)</span><br><span class="line">        clear</span><br><span class="line">        menu</span><br><span class="line">        ;;</span><br><span class="line">        woshiyunwei)</span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">        ;;</span><br><span class="line">        *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请输入正确信息！"</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>12.取10位随机小写字母</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat az.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">randstr</span></span>() &#123;</span><br><span class="line">  index=0</span><br><span class="line">  str=<span class="string">""</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> &#123;a..z&#125;; <span class="keyword">do</span> arr[index]=<span class="variable">$i</span>; index=`expr <span class="variable">$&#123;index&#125;</span> + 1`; <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;; <span class="keyword">do</span> str=<span class="string">"<span class="variable">$str</span><span class="variable">$&#123;arr[$RANDOM%$index]&#125;</span>"</span>; <span class="keyword">done</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> `randstr`</span><br></pre></td></tr></table></figure>

<p><strong>13.Ping10.0.1.0/24网段那些能通</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat ping.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 254`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   &#123;</span><br><span class="line">   IP=10.0.1.<span class="variable">$i</span></span><br><span class="line">   ping -c 1 -W 1 <span class="variable">$IP</span> &amp;&gt;/dev/null</span><br><span class="line">   <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"10.0.1.<span class="variable">$i</span> is OK"</span></span><br><span class="line"><span class="keyword">fi</span> </span><br><span class="line">&#125; &amp;  </span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"在线取IP完成..."</span></span><br></pre></td></tr></table></figure>

<p><strong>14.输入两个整数计算这两个整数的相加，相减，相乘，相除，求余的结果</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input num1: "</span> num1</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input num2: "</span> num2</span><br><span class="line">expr <span class="variable">$num1</span> + 1 &amp;&gt;/dev/null</span><br><span class="line">RERVAL_A=$?</span><br><span class="line">expr <span class="variable">$num2</span> + 1 &amp;&gt;/dev/null</span><br><span class="line">RERVAL_B=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$RERVAL_A</span> -ne 0 -o <span class="variable">$RERVAL_B</span> -ne 0 ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"请输入整数"</span> </span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"mun1+num2 =<span class="variable">$(( num1 + num2 )</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"mun1-num2 =<span class="variable">$(( num1 - num2 )</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"mun1*num2 =<span class="variable">$(( num1 * num2 )</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"mun1/num2 =<span class="variable">$(( num1 / num2 )</span>)"</span></span><br></pre></td></tr></table></figure>

<p><strong>15.打印下面这句话中字母数小于5的单词  I am lizhenya teacher I am 18</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> I am lizhenya teacher I am 18</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;#i&#125;</span> -lt 5 ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>16.写个shell，看看你的linux系统中是否有自定义用户（普通用户），若是有，一共有几个？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">user=`awk <span class="string">'NR!=1'</span> /etc/passwd|awk -F: <span class="string">'/\/bin\/bash$/&#123;print $1&#125;'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user</span></span><br></pre></td></tr></table></figure>

<p><strong>17.写一个shell脚本来看看你使用最多的命令是哪些，列出你最常用的命令top10</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">HISTFILE=~/.bash_history</span><br><span class="line"><span class="built_in">set</span> -o <span class="built_in">history</span></span><br><span class="line">re=`<span class="built_in">history</span>|awk <span class="string">'&#123;print $2&#125;'</span>|sort|uniq -c|sort -nr|head`</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"最近使用最多的前个命令10是:\n<span class="variable">$re</span>"</span></span><br></pre></td></tr></table></figure>

<p><strong>18.编写一个脚本，计算100以内所有能被3整除数字的和</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">sum=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..100&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> 	[ $((i % 3)) -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		sum=$[<span class="variable">$sum</span>+<span class="variable">$i</span>]</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br></pre></td></tr></table></figure>

<p><strong>19.写一个脚本计算一下Linux系统所有进程占用内存大小的和</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">sum=0</span><br><span class="line"><span class="keyword">for</span> mem <span class="keyword">in</span> `ps aux |awk <span class="string">'&#123;print $6&#125;'</span> |grep -v <span class="string">'RSS'</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">sum=$[<span class="variable">$sum</span>+<span class="variable">$mem</span>]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The total memory is <span class="variable">$sum</span>."</span></span><br></pre></td></tr></table></figure>

<p><strong>20.打印一个菜单如下，然后用循环加case语句输出用户输入菜单选项的结果</strong><br>h 显示命令帮助<br>f 显示登陆信息<br>d 显示磁盘挂载<br>m 查看内存使用<br>u 查看系统负载<br>q 退出程序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">nume</span></span>()&#123;</span><br><span class="line">cat&lt;&lt;EOF</span><br><span class="line">h 显示命令帮助    </span><br><span class="line">f 显示登陆信息 </span><br><span class="line">d 显示磁盘挂载 </span><br><span class="line">m 查看内存使用 </span><br><span class="line">u 查看系统负载 </span><br><span class="line">q 退出程序</span><br><span class="line">EOF</span><br><span class="line">&#125;</span><br><span class="line">nume</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p “please input num”num</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$num</span> <span class="keyword">in</span></span><br><span class="line">	h)</span><br><span class="line">	man</span><br><span class="line">	;;</span><br><span class="line">	f)</span><br><span class="line">	who</span><br><span class="line">	;;</span><br><span class="line">	d)</span><br><span class="line">	df -h</span><br><span class="line">	;;</span><br><span class="line">	m)</span><br><span class="line">	free -h</span><br><span class="line">	;;</span><br><span class="line">	u)</span><br><span class="line">	w</span><br><span class="line">	;;</span><br><span class="line">	q)</span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">	;;</span><br><span class="line">	*)</span><br><span class="line">	<span class="built_in">echo</span> “请输入正确编号 ”</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>21.写一个数组脚本统计/var/log/nginx.log里IP访问次数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">awk ‘&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125; /var/<span class="built_in">log</span>/nginx.log &gt;ip.txt</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">declare</span> -A array</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		<span class="built_in">let</span> array[<span class="variable">$line</span>]++</span><br><span class="line"><span class="keyword">done</span>&lt;ip.txt</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;!array[*]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> “nginx 的<span class="variable">$i</span> 访问次数为 <span class="variable">$i</span>|sort -nr|wc -l”</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>22.统计下面这句话中字母数不大于6的单词（至少两种方式）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.echo “I am oldboy teacher welcome to oldboy training class”|xargs -n1|awk ‘<span class="keyword">if</span>(length&lt;7)&#123;<span class="built_in">print</span>&#125;’</span><br><span class="line">2.<span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> I am oldboy teacher welcome to oldboy training class</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> [ <span class="variable">$&#123;#i&#125;</span> -le 6 ];<span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>23.使用for循环在/oldboy目录下通过随机小写10个字母加固定字符串oldboy批量创建10个html文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@backup /server/scripts]<span class="comment"># cat oldboy.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">dir=/oldboy</span><br><span class="line">[ ! -d <span class="variable">$dir</span> ] &amp;&amp; mkdir <span class="variable">$dir</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> `seq 10`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="function"><span class="title">randstr</span></span>() &#123;</span><br><span class="line">	index=0</span><br><span class="line">	str=<span class="string">""</span></span><br><span class="line">  	<span class="keyword">for</span> i <span class="keyword">in</span> &#123;a..z&#125;; <span class="keyword">do</span> arr[index]=<span class="variable">$i</span>; index=`expr <span class="variable">$&#123;index&#125;</span> + 1`; <span class="keyword">done</span></span><br><span class="line">  	<span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;; <span class="keyword">do</span> str=<span class="string">"<span class="variable">$str</span><span class="variable">$&#123;arr[$RANDOM%$index]&#125;</span>"</span>; <span class="keyword">done</span></span><br><span class="line">   	<span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line">&#125;</span><br><span class="line">touch <span class="variable">$dir</span>/`randstr`_oldboy.html</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> `randstr`_oldboy.html create successful</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Wu Fei</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://linuxwf.com/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/">http://linuxwf.com/2020/04/15/4-Shell-%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://linuxwf.com" target="_blank">WF's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/shell/">shell</a></div><div class="post_share"><div class="social-share" data-image="/img/wallhaven-2714.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/15/1-DevOps/"><img class="prev_cover lazyload" data-src="/img/wallhaven-2714.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">1.DevOps</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/15/3-if%E8%AF%AD%E5%8F%A5%E5%92%8Ccase%E8%AF%AD%E5%8F%A5/"><img class="next_cover lazyload" data-src="/img/wallpaper-2476168.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">3.if语句和case语句</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/04/15/1-shell编程介绍及变量/" title="1.shell编程介绍及变量"><img class="relatedPosts_cover lazyload"data-src="/img/wallpaper-2476168.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">1.shell编程介绍及变量</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/2-Shell脚本的条件测试与比较/" title="2.Shell脚本的条件测试与比较"><img class="relatedPosts_cover lazyload"data-src="/img/wallhaven-435555.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">2.Shell脚本的条件测试与比较</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/15/3-if语句和case语句/" title="3.if语句和case语句"><img class="relatedPosts_cover lazyload"data-src="/img/wallpaper-2476168.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">3.if语句和case语句</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: false,
  appId: 'mJGbzahn0dOntrhO5Hek8Rjd-gzGzoHsz',
  appKey: 'b0O75eIR8ULkl2kyDWLgLXM0',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" style="background-image: url(/img/post.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Wu Fei</div><div class="footer_custom_text">Hi, welcome to my <a href="https://www.linuxwf.com/" target="_blank" rel="noopener">blog</a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备19138449号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode far fa-moon" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/algolia.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":100,"vOffset":-50},"mobile":{"show":true,"scale":0.5}});</script></body></html>