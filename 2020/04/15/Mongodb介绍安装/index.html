<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mongodb介绍安装 | WF's Blog</title><meta name="description" content="Mongodb介绍安装"><meta name="keywords" content="MongoDB"><meta name="author" content="Wu Fei"><meta name="copyright" content="Wu Fei"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Mongodb介绍安装"><meta name="twitter:description" content="Mongodb介绍安装"><meta name="twitter:image" content="http://linuxwf.com/img/wallhaven-630117.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Mongodb介绍安装"><meta property="og:url" content="http://linuxwf.com/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/"><meta property="og:site_name" content="WF's Blog"><meta property="og:description" content="Mongodb介绍安装"><meta property="og:image" content="http://linuxwf.com/img/wallhaven-630117.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://linuxwf.com/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/"><link rel="prev" title="Mongo命令与副本集" href="http://linuxwf.com/2020/04/15/Mongo%E5%91%BD%E4%BB%A4%E4%B8%8E%E5%89%AF%E6%9C%AC%E9%9B%86/"><link rel="next" title="MySQL配置文件参数" href="http://linuxwf.com/2020/04/15/MySQL%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8F%82%E6%95%B0/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bf8fa809dbe0a82b3d983accb9d256fe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"GQXJKQPX6A","apiKey":"9d6901decfc3e9736a8f99965d4fc700","indexName":"my_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: true,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="WF's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">58</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Mongodb介绍安装"><span class="toc-number">1.</span> <span class="toc-text">Mongodb介绍安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第1章-NoSQL-介绍"><span class="toc-number">1.1.</span> <span class="toc-text">第1章 NoSQL 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-NoSQL-简介"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 NoSQL 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-什么是NoSQL"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 什么是NoSQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-为什么使用NoSQL"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 为什么使用NoSQL ?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第2章-MongoDB-简介"><span class="toc-number">1.2.</span> <span class="toc-text">第2章 MongoDB 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-MongoDB-数据格式"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 MongoDB 数据格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-JSON"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.1 JSON</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-BSON"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2.1.2 BSON</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-MongoDB-特点"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 MongoDB 特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#高性能："><span class="toc-number">1.2.2.1.</span> <span class="toc-text">高性能：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#丰富的语言查询："><span class="toc-number">1.2.2.2.</span> <span class="toc-text">丰富的语言查询：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#高可用性："><span class="toc-number">1.2.2.3.</span> <span class="toc-text">高可用性：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#水平可扩展性："><span class="toc-number">1.2.2.4.</span> <span class="toc-text">水平可扩展性：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#支持多种存储引擎："><span class="toc-number">1.2.2.5.</span> <span class="toc-text">支持多种存储引擎：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-MongoDB-包含的程序"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 MongoDB 包含的程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第3章-应用场景"><span class="toc-number">1.3.</span> <span class="toc-text">第3章 应用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第4章-安装部署"><span class="toc-number">1.4.</span> <span class="toc-text">第4章 安装部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-官方文档"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 官方文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-安装方式"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-目录规划"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 目录规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第5章-配置文件"><span class="toc-number">1.5.</span> <span class="toc-text">第5章 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-创建配置文件"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 创建配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-启动关闭mongo"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 启动关闭mongo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-检查是否启动"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 检查是否启动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第6章-登录mongo"><span class="toc-number">1.6.</span> <span class="toc-text">第6章 登录mongo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-写入环境变量"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 写入环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-创建hosts-解析"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 创建hosts 解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-登录mongo"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 登录mongo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-关闭命令"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4 关闭命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第7章-警告优化"><span class="toc-number">1.7.</span> <span class="toc-text">第7章 警告优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-内存不足"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 内存不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-配置访问控制参数"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 配置访问控制参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-普通用户启动"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 普通用户启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-never"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 never</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-用户访问控制"><span class="toc-number">1.7.5.</span> <span class="toc-text">7.5 用户访问控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第8章-mongodb-默认存在的库"><span class="toc-number">1.8.</span> <span class="toc-text">第8章 mongodb 默认存在的库</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/wallhaven-630117.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">WF's Blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw far fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Mongodb介绍安装</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-15 10:56:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-04-15 10:58:08"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-04-15</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon far fa-file-word" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.1k</span><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-clock" aria-hidden="true"></i><span>阅读时长: 12 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-comments" aria-hidden="true"></i><span>评论数:</span><a href="/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="Mongodb介绍安装"><a href="#Mongodb介绍安装" class="headerlink" title="Mongodb介绍安装"></a>Mongodb介绍安装</h1><h2 id="第1章-NoSQL-介绍"><a href="#第1章-NoSQL-介绍" class="headerlink" title="第1章 NoSQL 介绍"></a>第1章 NoSQL 介绍</h2><h3 id="1-1-NoSQL-简介"><a href="#1-1-NoSQL-简介" class="headerlink" title="1.1 NoSQL 简介"></a>1.1 NoSQL 简介</h3><p><code>NoSQL(NoSQL = Not Only SQL )</code>，意即”不仅仅是SQL”。<br>在现代的计算系统上每天网络上都会产生庞大的数据量。<br>这些数据有很大一部分是由关系数据库管理系统（RDMBSs）来处理。1970 年E.F.Codd’s 提出的<br>关系模型的论文“A relational model of data for large shared data banks”，这使得数据建模和应用程序<br>编程更加简单。<br>通过应用实践证明，关系模型是非常适合于客户服务器编程，远远超出预期的利益，今天它是结构化<br>数据存储在网络和商务应用的主导技术。<br>NoSQL 是一项全新的数据库革命性运动，早期就有人提出，发展至2009 年趋势越发高涨。NoSQL<br>的拥护者们提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，这一概念无疑是一<br>种全新的思维的注入。</p>
<h3 id="1-2-什么是NoSQL"><a href="#1-2-什么是NoSQL" class="headerlink" title="1.2 什么是NoSQL"></a>1.2 什么是NoSQL</h3><p><code>NoSQL</code>，指的是非关系型的数据库。<code>NoSQL</code> 有时也称作Not Only SQL 的缩写，是对不同于传统的关<br>系型数据库的数据库管理系统的统称。<br>对<code>NoSQL</code>最普遍的解释是”非关联型的”，强调Key-Value Stores 和文档数据库的优点，而不是单<br>纯的反对RDBMS。<br>NoSQL 用于超大规模数据的存储。（例如谷歌或Facebook 每天为他们的用户收集万亿比特的数据）。<br>这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。</p>
<h3 id="1-3-为什么使用NoSQL"><a href="#1-3-为什么使用NoSQL" class="headerlink" title="1.3 为什么使用NoSQL ?"></a>1.3 为什么使用NoSQL ?</h3><p>今天我们可以通过第三方平台（如：Google,Facebook 等）可以很容易的访问和抓取数据。</p>
<p>用户的个人信息，社交网络，地理位置，用户生成的数据和用户操作日志已经成倍的增加。我们如果</p>
<p>要对这些用户数据进行挖掘，那SQL 数据库已经不适合这些应用了, NoSQL 数据库的发展也却能很好</p>
<p>的处理这些大的数据。</p>
<h2 id="第2章-MongoDB-简介"><a href="#第2章-MongoDB-简介" class="headerlink" title="第2章 MongoDB 简介"></a>第2章 MongoDB 简介</h2><p><code>Mongodb</code> 由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。，是专为可扩展性，<br>高性能和高可用性而设计的数据库， 是非关系型数据库中功能最丰富，最像关系型数据库的，它支<br>持的数据结构非常散，是类似json 的bjson 格式，因此可以存储比较复杂的数据类型。</p>
<p><code>MongoDB</code> 的（来自于英文单词“了Humongous”，中文含义为“庞大”）是可以应用于各种规模的<br>企业，各个行业以及各类应用程序的开源数据库。作为一个适用于敏捷开发的数据库，MongoDB 的<br>的数据模式可以随着应用程序的发展而灵活地更新。</p>
<p><code>MongoDB</code> 以一种叫做BSON（二进制JSON）的存储形式将数据作为文档存储。具有相似结构的文<br>档通常被整理成集合。可以把这些集合看成类似于关系数据库中的表： 文档和行相似， 字段和列相<br>似。</p>
<h3 id="2-1-MongoDB-数据格式"><a href="#2-1-MongoDB-数据格式" class="headerlink" title="2.1 MongoDB 数据格式"></a>2.1 MongoDB 数据格式</h3><h4 id="2-1-1-JSON"><a href="#2-1-1-JSON" class="headerlink" title="2.1.1 JSON"></a>2.1.1 JSON</h4><p><code>JSON(JavaScript Object Notation)</code> 是一种轻量级的数据交换格式。<code>JSON</code> 采用完全独立于语言的文本格<br>式，但是也使用了类似于C 语言家族的习惯（包括C、C++、C#、Java、JavaScript、Perl、Python<br>等）。这些特性使JSON 成为理想的数据交换语言.易于人阅读和编写，同时也易于机器解析和生成(一<br>般用于提升网络传输速率)。JSON 的官方MIME 类型是application/json,文件扩展名是.json。<br>MongoDB 使用JSON（JavaScript ObjectNotation）文档存储记录。<br>JSON 简单说就是JavaScript 中的对象和数组，通过对象和数组可以表示各种复杂的结构。<br>对象：<br>对象在js 中表示为“{}”括起来的内容，数据结构为{key： value,key： value,…}的键值对的<br>结构，在面向对象的语言中， key 为对象的属性， value 为对应的属性值，所以很容易理解，取值方<br>法为对象.key 获取属性值，这个属性值的类型可以是数字、字符串、数组、对象几种。<br>例如： {“FirstName”:”ke”,”LastName”:”me”,”email”:”hikeme@aa”}<br>取值方式和所有语言中一样,使用key 获取,字段值的类型可以是数字、字符串、数组、对象几种。</p>
<h4 id="2-1-2-BSON"><a href="#2-1-2-BSON" class="headerlink" title="2.1.2 BSON"></a>2.1.2 BSON</h4><p><code>BSON</code> 是一种类JSON 的一种二进制形式的存储格式，简称Binary JSON，它和JSON 一样，支持内<br>嵌的文档对象和数组对象，但是BSON 有JSON 没有的一些数据类型，如Date 和BinData 类型。<br>它的优点是灵活性高，但它的缺点是空间利用率不是很理想。<br><code>BSON</code> 有三个特点：轻量性、可遍历性、高效性。<br>对JSON 来说，数据存储是无类型的，比如你要修改基本一个值，从9 到10，由于从一个字符变成<br>了两个，所以可能其后面的所有内容都需要往后移一位才可以。而使用BSON，你可以指定这个列为<br>数字列，那么无论数字从9 长到10 还是100，我们都只是在存储数字的那一位上进行修改，不会导<br>致数据总长变大。当然，在MongoDB 中，如果数字从整形增大到长整型，还是会导致数据总长变大<br>的。<br>有时BSON 相对JSON 来说也并没有空间上的优势，比如对{“sex”:1}，在JSON 的存储上1 只使用了一个字节，而如果用BSON，那就是至少4 个字节</p>
<h3 id="2-2-MongoDB-特点"><a href="#2-2-MongoDB-特点" class="headerlink" title="2.2 MongoDB 特点"></a>2.2 MongoDB 特点</h3><h4 id="高性能："><a href="#高性能：" class="headerlink" title="高性能："></a>高性能：</h4><p><code>Mongodb</code> 提供高性能的数据持久性，尤其是支持嵌入式数据模型减少数据库系统上的I/O<br>操作，索引支持能快的查询，并且可以包括来嵌入式文档和数组中的键</p>
<h4 id="丰富的语言查询："><a href="#丰富的语言查询：" class="headerlink" title="丰富的语言查询："></a>丰富的语言查询：</h4><p><code>Mongodb</code> 支持丰富的查询语言来支持读写操作（CRUD）以及数据汇总，文本搜索和地理空间索引</p>
<h4 id="高可用性："><a href="#高可用性：" class="headerlink" title="高可用性："></a>高可用性：</h4><p><code>Mongodb</code> 的复制工具，成为副本集，提供自动故障转移和数据冗余，</p>
<h4 id="水平可扩展性："><a href="#水平可扩展性：" class="headerlink" title="水平可扩展性："></a>水平可扩展性：</h4><p><code>Mongodb</code> 提供了可扩展性，作为其核心功能的一部分，分片是将数据分，在一组计算机上。</p>
<h4 id="支持多种存储引擎："><a href="#支持多种存储引擎：" class="headerlink" title="支持多种存储引擎："></a>支持多种存储引擎：</h4><p>WiredTiger 存储引擎和、MMAPv1 存储引擎和InMemory 存储引擎</p>
<h3 id="2-3-MongoDB-包含的程序"><a href="#2-3-MongoDB-包含的程序" class="headerlink" title="2.3 MongoDB 包含的程序"></a>2.3 MongoDB 包含的程序</h3><p><strong>MongoDB Drivers</strong></p>
<p>官方MongoDB 客户端库提供C， C ++， C＃， Java， Node.JS， Perl， PHP，Python， Ruby 和<br>Scala 驱动程序的参考指南。</p>
<p><strong>MongoDB Stitch</strong></p>
<p>为开发人员提供了一个API 到MongoDB 和其他后端服务。保持MongoDB 的全部功能和灵性，同时<br>受益于强大的系统来配置细粒度的数据访问控制。</p>
<p><strong>MongoDB Atlas</strong></p>
<p>MongoDB 在云中部署，操作和扩展的最佳方式。适用于AWS，Azure 和Google Cloud Platform。轻<br>松将数据迁移到MongoDB Atlas，零停机</p>
<p><strong>MongoDB Cloud Manager</strong></p>
<p>是一个用于管理MongoDB 部署的软件包。Ops Manager 提供Ops Manager 监控和Ops Manager 备份，可帮助用户优化群集并降低操作风险</p>
<p><strong>MongoDB Charts</strong></p>
<p>可以最快速最简单的创建Mongodb 可视化图表</p>
<p><strong>MongoDB Connector for BI</strong></p>
<p>MongoDB 商业智能连接器（BI）允许用户使用SQL 创建查询，并使用现有的关系商业智能工具（如<br>Tableau， MicroStrategy 和Qlik）对其MongoDB Enterprise 数据进行可视化，图形化和报告。</p>
<p><strong>MongoDB Compass</strong></p>
<p>通过从集合中随机抽样一个文档子集，为用户提供其MongoDB 模式的图形视图。采样文件可最大程<br>度地降低对数据库的影响，并能快速产生结果。有关抽样的更多信息</p>
<p><strong>MongoDB Spark Connector</strong></p>
<p>使用连接器，您可以访问所有使用MongoDB 数据集的Spark 库：用SQL 进行分析的数据集（受益于<br>自动模式推理），流式传输，机器学习和图形API。您也可以使用连接器与Spark Shell。</p>
<h2 id="第3章-应用场景"><a href="#第3章-应用场景" class="headerlink" title="第3章 应用场景"></a>第3章 应用场景</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;32071167</span><br></pre></td></tr></table></figure>

<h2 id="第4章-安装部署"><a href="#第4章-安装部署" class="headerlink" title="第4章 安装部署"></a>第4章 安装部署</h2><h3 id="4-1-官方文档"><a href="#4-1-官方文档" class="headerlink" title="4.1 官方文档"></a>4.1 官方文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;docs.mongodb.com&#x2F;manual&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-安装方式"><a href="#4-2-安装方式" class="headerlink" title="4.2 安装方式"></a>4.2 安装方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.mongodb.com&#x2F;download-center&#x2F;enterprise</span><br></pre></td></tr></table></figure>

<p>这里选用tar 包的安装方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb-linux-x86_64-3.6.13.tgz</span><br></pre></td></tr></table></figure>

<h3 id="4-3-目录规划"><a href="#4-3-目录规划" class="headerlink" title="4.3 目录规划"></a>4.3 目录规划</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载并解压</span></span><br><span class="line">yum install libcurl openssl -y</span><br><span class="line"><span class="built_in">cd</span> /opt/</span><br><span class="line">tar xf mongodb-linux-x86_64-3.6.13.tgz</span><br><span class="line">ln -s mongodb-linux-x86_64-3.6.13 mongodb</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建文件目录以及数据目录</span></span><br><span class="line">mkdir /opt/mongo_27017/&#123;conf,logs,pid&#125; -p</span><br><span class="line">mkdir /data/mongo_27017 -p</span><br></pre></td></tr></table></figure>

<h2 id="第5章-配置文件"><a href="#第5章-配置文件" class="headerlink" title="第5章 配置文件"></a>第5章 配置文件</h2><h3 id="5-1-创建配置文件"><a href="#5-1-创建配置文件" class="headerlink" title="5.1 创建配置文件"></a>5.1 创建配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/mongo_27017/conf/mongodb.conf  &lt;&lt; EOF</span><br><span class="line">systemLog:</span><br><span class="line">  destination: file   </span><br><span class="line">  logAppend: <span class="literal">true</span>  </span><br><span class="line">  path: /opt/mongo_27017/logs/mongodb.log</span><br><span class="line"></span><br><span class="line">storage:</span><br><span class="line">  journal:</span><br><span class="line">    enabled: <span class="literal">true</span></span><br><span class="line">  dbPath: /data/mongo_27017</span><br><span class="line">  directoryPerDB: <span class="literal">true</span></span><br><span class="line">  wiredTiger:</span><br><span class="line">     engineConfig:</span><br><span class="line">        cacheSizeGB: 1</span><br><span class="line">        directoryForIndexes: <span class="literal">true</span></span><br><span class="line">     collectionConfig:</span><br><span class="line">        blockCompressor: zlib</span><br><span class="line">     indexConfig:</span><br><span class="line">        prefixCompression: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">processManagement:</span><br><span class="line">  fork: <span class="literal">true</span></span><br><span class="line">  pidFilePath: /opt/mongo_27017/pid/mongod.pid</span><br><span class="line"></span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">  bindIp: 127.0.0.1,10.0.1.51</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="5-2-启动关闭mongo"><a href="#5-2-启动关闭mongo" class="headerlink" title="5.2 启动关闭mongo"></a>5.2 启动关闭mongo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/opt/mongodb/bin/mongod -f /opt/mongo_27017/conf/mongodb.conf</span><br><span class="line">/opt/mongodb/bin/mongod -f /opt/mongo_27017/conf/mongodb.conf --shutdown</span><br></pre></td></tr></table></figure>

<h3 id="5-3-检查是否启动"><a href="#5-3-检查是否启动" class="headerlink" title="5.3 检查是否启动"></a>5.3 检查是否启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep mongo</span><br><span class="line">netstat -lntup|grep 27017</span><br></pre></td></tr></table></figure>

<h2 id="第6章-登录mongo"><a href="#第6章-登录mongo" class="headerlink" title="第6章 登录mongo"></a>第6章 登录mongo</h2><h3 id="6-1-写入环境变量"><a href="#6-1-写入环境变量" class="headerlink" title="6.1 写入环境变量"></a>6.1 写入环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'PATH=$PATH:/opt/mongodb/bin'</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="6-2-创建hosts-解析"><a href="#6-2-创建hosts-解析" class="headerlink" title="6.2 创建hosts 解析"></a>6.2 创建hosts 解析</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]<span class="comment"># cat &gt; /etc/hosts &lt;&lt;EOF</span></span><br><span class="line">10.0.1.51 172.16.1.51 db01</span><br></pre></td></tr></table></figure>

<h3 id="6-3-登录mongo"><a href="#6-3-登录mongo" class="headerlink" title="6.3 登录mongo"></a>6.3 登录mongo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/opt/mongodb/bin/mongo</span><br><span class="line">mongo db01:27017</span><br></pre></td></tr></table></figure>

<h3 id="6-4-关闭命令"><a href="#6-4-关闭命令" class="headerlink" title="6.4 关闭命令"></a>6.4 关闭命令</h3><p>2 种关闭方式，建议使用mongo 自带的命令</p>
<p><strong>方法1:登陆mongo 使用内置shutdown 命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]<span class="comment"># mongo localhost:27017</span></span><br><span class="line"></span><br><span class="line">&gt; use admin</span><br><span class="line">switched to db admin</span><br><span class="line">&gt; db.shutdownServer()</span><br><span class="line">server should be down...</span><br><span class="line">2019-11-05T03:26:54.171+0800 I NETWORK  [thread1] trying reconnect to localhost:27017 (127.0.0.1) failed</span><br><span class="line">2019-11-05T03:26:54.171+0800 W NETWORK  [thread1] Failed to connect to 127.0.0.1:27017, <span class="keyword">in</span>(checking socket <span class="keyword">for</span> error after poll), reason: Connection refused</span><br><span class="line">2019-11-05T03:26:54.171+0800 I NETWORK  [thread1] reconnect localhost:27017 (127.0.0.1) failed failed</span><br></pre></td></tr></table></figure>

<p><strong>方法2:启动命令添加–shutdown 命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[mongo@db01 ~]$ mongod -f /opt/mongo_27017/conf/mongodb.conf --shutdown</span><br></pre></td></tr></table></figure>

<h2 id="第7章-警告优化"><a href="#第7章-警告优化" class="headerlink" title="第7章 警告优化"></a>第7章 警告优化</h2><h3 id="7-1-内存不足"><a href="#7-1-内存不足" class="headerlink" title="7.1 内存不足"></a>7.1 内存不足</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#报警内容1：内存不足</span></span><br><span class="line">2019-11-05T00:24:56.345+0800 I STORAGE  [initandlisten] ** WARNING: The configured WiredTiger cache size is more than 80% of available RAM.</span><br><span class="line"></span><br><span class="line"><span class="comment">#解决方法：</span></span><br><span class="line">1.添加内存</span><br><span class="line">2.调整配置文件里的cache大小</span><br><span class="line">[root@db01 ~]<span class="comment"># grep "cacheSizeGB" /opt/mongo_27017/conf/monogdb.conf</span></span><br><span class="line">cacheSizeGB: 1</span><br></pre></td></tr></table></figure>

<h3 id="7-2-配置访问控制参数"><a href="#7-2-配置访问控制参数" class="headerlink" title="7.2 配置访问控制参数"></a>7.2 配置访问控制参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#报警内容2：配置访问控制参数</span></span><br><span class="line">2019-11-05T00:24:56.345+0800 I STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/faq-memory-diagnostics-wt</span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled <span class="keyword">for</span> the database.</span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.</span><br></pre></td></tr></table></figure>

<h3 id="7-3-普通用户启动"><a href="#7-3-普通用户启动" class="headerlink" title="7.3 普通用户启动"></a>7.3 普通用户启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#报警内容3：不是以普通用户启动</span></span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] ** WARNING: You are running this process as the root user, <span class="built_in">which</span> is not recommended.</span><br><span class="line"></span><br><span class="line"><span class="comment">#解决方法：</span></span><br><span class="line">mongod -f /opt/mongo_27017/conf/mongodb.conf --shutdown</span><br><span class="line">useradd mongo</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"123456"</span>|passwd --stdin mongo</span><br><span class="line">chown -R mongo:mongo /opt/</span><br><span class="line">chown -R mongo:mongo /data/</span><br><span class="line">su - mongo</span><br><span class="line">mongod -f /opt/mongo_27017/conf/mongodb.conf</span><br><span class="line">mongo db01:27017</span><br></pre></td></tr></table></figure>

<h3 id="7-4-never"><a href="#7-4-never" class="headerlink" title="7.4 never"></a>7.4 never</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#报警内容4：We suggest setting it to 'never'</span></span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is <span class="string">'always'</span>.</span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] **        We suggest setting it to <span class="string">'never'</span></span><br><span class="line"></span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is <span class="string">'always'</span>.</span><br><span class="line">2019-11-05T00:24:57.129+0800 I CONTROL  [initandlisten] **        We suggest setting it to <span class="string">'never'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解决方法：</span></span><br><span class="line">1.临时解决</span><br><span class="line"><span class="built_in">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line"><span class="built_in">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line"></span><br><span class="line">2.官方脚本  <span class="comment">##推荐</span></span><br><span class="line">[root@db01 ~]<span class="comment"># cat /etc/init.d/disable-transparent-hugepages</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">### BEGIN INIT INFO</span></span><br><span class="line"><span class="comment"># Provides:          disable-transparent-hugepages</span></span><br><span class="line"><span class="comment"># Required-Start:    $local_fs</span></span><br><span class="line"><span class="comment"># Required-Stop:</span></span><br><span class="line"><span class="comment"># X-Start-Before:    mongod mongodb-mms-automation-agent</span></span><br><span class="line"><span class="comment"># Default-Start:     2 3 4 5</span></span><br><span class="line"><span class="comment"># Default-Stop:      0 1 6</span></span><br><span class="line"><span class="comment"># Short-Description: Disable Linux transparent huge pages</span></span><br><span class="line"><span class="comment"># Description:       Disable Linux transparent huge pages, to improve</span></span><br><span class="line"><span class="comment">#                    database performance.</span></span><br><span class="line"><span class="comment">### END INIT INFO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">  start)</span><br><span class="line">    <span class="keyword">if</span> [ -d /sys/kernel/mm/transparent_hugepage ]; <span class="keyword">then</span></span><br><span class="line">      thp_path=/sys/kernel/mm/transparent_hugepage</span><br><span class="line">    <span class="keyword">elif</span> [ -d /sys/kernel/mm/redhat_transparent_hugepage ]; <span class="keyword">then</span></span><br><span class="line">      thp_path=/sys/kernel/mm/redhat_transparent_hugepage</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'never'</span> &gt; <span class="variable">$&#123;thp_path&#125;</span>/enabled</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'never'</span> &gt; <span class="variable">$&#123;thp_path&#125;</span>/defrag</span><br><span class="line"></span><br><span class="line">    re=<span class="string">'^[0-1]+$'</span></span><br><span class="line">    <span class="keyword">if</span> [[ $(cat <span class="variable">$&#123;thp_path&#125;</span>/khugepaged/defrag) =~ <span class="variable">$re</span> ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      <span class="comment"># RHEL 7</span></span><br><span class="line">      <span class="built_in">echo</span> 0  &gt; <span class="variable">$&#123;thp_path&#125;</span>/khugepaged/defrag</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment"># RHEL 6</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">'no'</span> &gt; <span class="variable">$&#123;thp_path&#125;</span>/khugepaged/defrag</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">unset</span> re</span><br><span class="line">    <span class="built_in">unset</span> thp_path</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><strong>赋予脚本权限</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 /etc/init.d/<span class="built_in">disable</span>-transparent-hugepages</span><br></pre></td></tr></table></figure>

<p><strong>加入开机自启动</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add <span class="built_in">disable</span>-transparent-hugepages</span><br><span class="line">chkconfig --list|grep <span class="built_in">disable</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-用户访问控制"><a href="#7-5-用户访问控制" class="headerlink" title="7.5 用户访问控制"></a>7.5 用户访问控制</h3><p>配置文件增加用户认证的配置参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">security:</span><br><span class="line">authorization: enabled</span><br></pre></td></tr></table></figure>

<h2 id="第8章-mongodb-默认存在的库"><a href="#第8章-mongodb-默认存在的库" class="headerlink" title="第8章 mongodb 默认存在的库"></a>第8章 mongodb 默认存在的库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; show dbs</span><br><span class="line">admin   0.000GB		-----&gt;系统预留库,MongoDB 系统管理库</span><br><span class="line">config  0.000GB		-----&gt;MongoDB 配置信息库</span><br><span class="line"><span class="built_in">local</span>   0.000GB		-----&gt;本地预留库,存储关键日志</span><br></pre></td></tr></table></figure>

<p>操作命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show databases/show dbs</span><br><span class="line">show tables/show collections</span><br><span class="line">use admin</span><br><span class="line">db/select database()</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Wu Fei</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://linuxwf.com/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/">http://linuxwf.com/2020/04/15/Mongodb%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://linuxwf.com" target="_blank">WF's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MongoDB/">MongoDB</a></div><div class="post_share"><div class="social-share" data-image="/img/63060960_p0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/15/Mongo%E5%91%BD%E4%BB%A4%E4%B8%8E%E5%89%AF%E6%9C%AC%E9%9B%86/"><img class="prev_cover lazyload" data-src="/img/wallhaven-630117.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mongo命令与副本集</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/15/MySQL%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8F%82%E6%95%B0/"><img class="next_cover lazyload" data-src="/img/65736993_p0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MySQL配置文件参数</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/04/15/Mongo命令与副本集/" title="Mongo命令与副本集"><img class="relatedPosts_cover lazyload"data-src="/img/wallhaven-630117.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-15</div><div class="relatedPosts_title">Mongo命令与副本集</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: false,
  appId: 'mJGbzahn0dOntrhO5Hek8Rjd-gzGzoHsz',
  appKey: 'b0O75eIR8ULkl2kyDWLgLXM0',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" style="background-image: url(/img/wallhaven-630117.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Wu Fei</div><div class="footer_custom_text">Hi, welcome to my <a href="https://www.linuxwf.com/" target="_blank" rel="noopener">blog</a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备19138449号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode far fa-moon" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/algolia.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":100,"vOffset":-50},"mobile":{"show":true,"scale":0.5}});</script></body></html>